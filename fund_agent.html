<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ™ºèˆµ - å°èˆµ</title>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <link href="https://at.alicdn.com/t/c/font_4431638_cpv7nz8taf4.css" rel="stylesheet">
    <style>
        @font-face {
            font-family: 'AlibabaPuHuiTi';
            src: url('https://puhuiti.oss-cn-hangzhou.aliyuncs.com/AlibabaPuHuiTi-3/AlibabaPuHuiTi-3-55-Regular/AlibabaPuHuiTi-3-55-Regular.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
        }
        
        @font-face {
            font-family: 'AlibabaPuHuiTi';
            src: url('https://puhuiti.oss-cn-hangzhou.aliyuncs.com/AlibabaPuHuiTi-3/AlibabaPuHuiTi-3-65-Medium/AlibabaPuHuiTi-3-65-Medium.woff2') format('woff2');
            font-weight: 500;
            font-style: normal;
        }
        
        @font-face {
            font-family: 'AlibabaPuHuiTi';
            src: url('https://puhuiti.oss-cn-hangzhou.aliyuncs.com/AlibabaPuHuiTi-3/AlibabaPuHuiTi-3-75-SemiBold/AlibabaPuHuiTi-3-75-SemiBold.woff2') format('woff2');
            font-weight: 600;
            font-style: normal;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'AlibabaPuHuiTi', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background-color: #f8f9fc;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }
        
        .ios-container {
            width: 100%;
            height: 100%;
            max-width: 430px;
            margin: 0 auto;
            background-color: #f8f9fc;
            border-radius: 40px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            display: flex;
            flex-direction: column;
        }
        
        .status-bar {
            height: 44px;
            background-color: #f8f9fc;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            font-size: 14px;
            color: #000;
            font-weight: 600;
        }
        
        .status-bar .time {
            flex: 1;
            text-align: center;
        }
        
        .status-bar .icons {
            display: flex;
            align-items: center;
        }
        
        .status-bar .icon {
            margin-left: 6px;
        }
        
        .chat-header {
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 16px;
            background-color: #ffffff;
            border-bottom: 1px solid #f0f0f0;
            position: relative;
        }
        
        .chat-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
        }
        
        .back-btn, .more-btn {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .back-btn i, .more-btn i {
            font-size: 24px;
            color: #666;
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
            display: flex;
            flex-direction: column;
            background-color: #f8f9fc;
        }
        
        .message-day {
            text-align: center;
            font-size: 12px;
            color: #999;
            margin: 8px 0 16px;
            position: relative;
        }
        
        .message-day:before, .message-day:after {
            content: "";
            height: 1px;
            background-color: #f0f0f0;
            flex: 1;
            position: absolute;
            top: 50%;
            width: 30%;
        }
        
        .message-day:before {
            left: 0;
        }
        
        .message-day:after {
            right: 0;
        }
        
        .message {
            max-width: 80%;
            margin-bottom: 16px;
            position: relative;
            align-self: flex-start;
        }
        
        .message.system {
            align-self: flex-start;
        }
        
        .message.user {
            align-self: flex-end;
        }
        
        .message-content {
            padding: 12px 16px;
            border-radius: 16px;
            font-size: 15px;
            line-height: 1.5;
            position: relative;
        }
        
        .system .message-content {
            background-color: #ffffff;
            color: #333;
            border-top-left-radius: 4px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        
        .user .message-content {
            background-color: #1a73e8;
            color: white;
            border-top-right-radius: 4px;
            box-shadow: 0 2px 8px rgba(26, 115, 232, 0.1);
        }
        
        .chat-input-container {
            padding: 10px 16px 30px;
            background-color: #ffffff;
            border-top: 1px solid #f0f0f0;
        }
        
        .function-bar {
            display: flex;
            gap: 10px;
            margin-bottom: 12px;
            padding: 0 4px;
        }
        
        .scene-switcher {
            display: flex;
            align-items: center;
            background-color: #f5f7fa;
            border-radius: 20px;
            padding: 6px 12px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .network-toggle {
            display: flex;
            align-items: center;
            background-color: #f0f5ff;
            border-radius: 20px;
            padding: 6px 14px;
            font-size: 14px;
            cursor: pointer;
            color: #1a73e8;
            margin-left: 0;
            margin-right: auto;
        }
        
        .network-toggle i {
            font-size: 18px;
            margin-right: 4px;
            color: #1a73e8;
        }
        
        .scene-switcher i, .network-toggle i {
            font-size: 16px;
            margin-right: 4px;
            color: #666;
        }
        
        .scene-switcher .ri-arrow-down-s-line {
            margin-left: 4px;
            margin-right: 0;
        }
        
        .scene-switcher:hover, .network-toggle:hover {
            background-color: #e9ecf1;
        }
        
        .network-toggle.active {
            background-color: #e8f1ff;
            color: #1a73e8;
        }
        
        .network-toggle.active i {
            color: #1a73e8;
        }
        
        .chat-input {
            display: flex;
            align-items: center;
            background-color: #f5f7fa;
            border-radius: 30px;
            padding: 10px 16px;
        }
        
        .input-area {
            flex: 1;
            font-size: 15px;
            background: none;
            border: none;
            outline: none;
            color: #333;
            height: 24px;
            margin: 0 8px;
        }
        
        .input-tools {
            display: flex;
            align-items: center;
        }
        
        .tool-btn {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 4px;
            cursor: pointer;
        }
        
        .tool-btn i {
            font-size: 20px;
            color: #666;
        }
        
        .plus-btn i {
            font-size: 22px;
            color: #1a73e8;
        }
        
        .camera-btn {
            margin-right: 4px;
        }
        
        .camera-btn i {
            color: #666;
            font-size: 20px;
        }
        
        /* æ‰©å±•èœå•æ ·å¼ */
        .extended-menu {
            display: none;
            justify-content: space-around;
            padding: 16px 0 8px 0;
            background-color: #f5f7fa;
            border-radius: 16px;
            margin-top: 12px;
        }
        
        .extended-menu-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 70px;
        }
        
        .menu-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background-color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 8px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
        }
        
        .menu-icon i {
            font-size: 24px;
            color: #1a73e8;
        }
        
        .menu-text {
            font-size: 12px;
            color: #666;
        }
        
        /* é€‚é…åº•éƒ¨å®‰å…¨åŒºåŸŸ */
        @supports (padding-bottom: env(safe-area-inset-bottom)) {
            .chat-input-container {
                padding-bottom: calc(10px + env(safe-area-inset-bottom));
            }
        }
        
        /* å³ä¸Šè§’èœå•æ ·å¼ */
        .more-menu {
            position: absolute;
            top: 60px;
            right: 16px;
            width: 240px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            z-index: 100;
            overflow: hidden;
            display: none;
        }
        
        .new-chat-btn {
            display: flex;
            align-items: center;
            padding: 15px 16px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            margin-top: 8px;
        }
        
        .new-chat-btn i {
            font-size: 20px;
            color: #1a73e8;
            margin-right: 10px;
        }
        
        .new-chat-btn .btn-text {
            font-size: 14px;
            color: #1a73e8;
            font-weight: 500;
        }
        
        .history-header {
            padding: 12px 16px;
            font-size: 13px;
            color: #666;
            background-color: #f8f9fc;
        }
        
        .history-list {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .history-item {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
        }
        
        .history-item:last-child {
            border-bottom: none;
        }
        
        .history-item i {
            font-size: 18px;
            color: #666;
            margin-right: 10px;
        }
        
        .history-content {
            flex: 1;
        }
        
        .history-title {
            font-size: 14px;
            color: #333;
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .history-time {
            font-size: 12px;
            color: #999;
        }
        
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.1);
            z-index: 99;
            display: none;
        }
        
        /* Scene dropdown menu */
        .scene-dropdown {
            position: absolute;
            bottom: 65px;
            left: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            width: 130px;
            overflow: hidden;
            z-index: 999;
            display: none;
        }
        
        .scene-option {
            padding: 12px 16px;
            font-size: 14px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        
        .scene-option:hover, .scene-option.active {
            background-color: #f5f7fa;
        }
        
        /* æ·»åŠ æ—‹è½¬åŠ¨ç”» */
        .rotating {
            animation: rotate 2s linear infinite;
        }
        
        @keyframes rotate {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }
    </style>
</head>
<body>
    <div class="ios-container">
        <div class="status-bar">
            <div class="time">9:41</div>
            <div class="icons">
                <div class="icon">
                    <i class="ri-signal-wifi-fill"></i>
                </div>
                <div class="icon">
                    <i class="ri-battery-fill"></i>
                </div>
            </div>
        </div>
        
        <div class="chat-header">
            <div class="back-btn">
                <i class="ri-close-line"></i>
            </div>
            <div class="chat-title">å°èˆµ</div>
            <div class="more-btn">
                <i class="ri-more-2-fill"></i>
            </div>
        </div>
        
        <!-- å³ä¸Šè§’èœå• -->
        <div class="more-menu">
            <div class="new-chat-btn">
                <i class="ri-add-circle-line"></i>
                <div class="btn-text">å¼€å¯æ–°ä¼šè¯</div>
            </div>
            <div class="history-header">å†å²èŠå¤©è®°å½•</div>
            <div class="history-list">
                <div class="history-item">
                    <i class="ri-chat-1-line"></i>
                    <div class="history-content">
                        <div class="history-title">Q3è¥æ”¶åˆ†æä¸é¢„æµ‹æŠ¥å‘Š</div>
                        <div class="history-time">ä»Šå¤© 10:25</div>
                    </div>
                </div>
                <div class="history-item">
                    <i class="ri-chat-1-line"></i>
                    <div class="history-content">
                        <div class="history-title">æˆæœ¬æ§åˆ¶ä¼˜åŒ–æ–¹æ¡ˆåˆ¶å®š</div>
                        <div class="history-time">ä»Šå¤© 09:18</div>
                    </div>
                </div>
                <div class="history-item">
                    <i class="ri-chat-1-line"></i>
                    <div class="history-content">
                        <div class="history-title">ç°é‡‘æµç®¡ç†ç­–ç•¥è°ƒæ•´</div>
                        <div class="history-time">æ˜¨å¤© 15:42</div>
                    </div>
                </div>
                <div class="history-item">
                    <i class="ri-chat-1-line"></i>
                    <div class="history-content">
                        <div class="history-title">æŠ•èµ„å›æŠ¥ç‡åˆ†æ</div>
                        <div class="history-time">æ˜¨å¤© 11:30</div>
                    </div>
                </div>
                <div class="history-item">
                    <i class="ri-chat-1-line"></i>
                    <div class="history-content">
                        <div class="history-title">å¸‚åœºæ‹“å±•é¢„ç®—è§„åˆ’</div>
                        <div class="history-time">06-15 14:20</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="overlay"></div>
        
        <div class="chat-messages">
            <div class="message-day">ä»Šå¤©</div>
            <div class="message system">
                <div class="message-content">
                    <p>æ¬¢è¿ä½¿ç”¨ç»è¥å†³ç­–æ™ºèƒ½ä½“ï¼Œæ‚¨å¯ä»¥éšæ—¶è·å–å®æ—¶ç»è¥æ•°æ®ï¼Œè¿›è¡Œæ·±åº¦åˆ†æï¼Œå¹¶è·å¾—æ™ºèƒ½åŒ–çš„ç»è¥å†³ç­–å»ºè®®ä¸é£é™©é¢„è­¦ã€‚</p>
                    
                    <div style="margin-top: 10px; background: #f8f9fc; border-radius: 12px; padding: 12px;">
                        <div style="margin-bottom: 8px; font-weight: 500; color: #333;">æ‚¨å¯ä»¥ä½“éªŒä»¥ä¸‹åœºæ™¯ï¼š</div>
                        <div style="display: flex; flex-direction: column; gap: 10px;">
                            <div id="data-scenario" style="background: #E8F1FF; color: #1a73e8; padding: 10px 12px; border-radius: 12px; font-size: 14px; cursor: pointer;">ä¸€ã€ç»è¥æ•°æ®è·å–æ¨¡æ‹Ÿ</div>
                            <div id="decision-scenario" style="background: #E8F1FF; color: #1a73e8; padding: 10px 12px; border-radius: 12px; font-size: 14px; cursor: pointer;">äºŒã€ç»è¥å†³ç­–åˆ¶å®š</div>
                        </div>
                    </div>
                    
                    <p style="margin-top: 8px; font-size: 13px; color: red;">ä»¥ä¸Šç»è¥åœºæ™¯ä»…ä½œä¸ºäº§å“æ¼”ç¤ºï¼ŒçœŸæ­£ä¸Šçº¿åCEOåœ¨è¾“å…¥æ¡†ç›´æ¥è¾“å…¥æç¤ºè¯æŸ¥è¯¢ç»è¥æ•°æ®æˆ–åˆ¶å®šå†³ç­–ã€‚</p>
                </div>
            </div>
        </div>
        
        <div class="chat-input-container">
            <div class="function-bar">
                <div class="scene-switcher">
                    <i class="iconfont icon-quanjing"></i>
                    <span>ç»è¥å†³ç­–</span>
                    <i class="ri-arrow-down-s-line"></i>
                </div>
                <div class="network-toggle active">
                    <i class="ri-global-line"></i>
                    <span>è”ç½‘</span>
                </div>
            </div>
            <div class="chat-input">
                <div class="tool-btn camera-btn">
                    <i class="ri-camera-line"></i>
                </div>
                <input type="text" class="input-area" placeholder="è¯·è¾“å…¥å…¬å¸ç»è¥ç±»é—®é¢˜ï½" autofocus>
                <div class="input-tools">
                    <div class="tool-btn">
                        <i class="ri-mic-line"></i>
                    </div>
                    <div class="tool-btn plus-btn">
                        <i class="ri-add-line"></i>
                    </div>
                </div>
            </div>
            
            <!-- æ·»åŠ æ‰©å±•èœå•ï¼Œé»˜è®¤éšè— -->
            <div class="extended-menu">
                <div class="extended-menu-item">
                    <div class="menu-icon">
                        <i class="ri-camera-line"></i>
                    </div>
                    <div class="menu-text">æ‹ç…§</div>
                </div>
                <div class="extended-menu-item">
                    <div class="menu-icon">
                        <i class="ri-image-line"></i>
                    </div>
                    <div class="menu-text">ä¸Šä¼ ç…§ç‰‡</div>
                </div>
                <div class="extended-menu-item">
                    <div class="menu-icon">
                        <i class="ri-file-line"></i>
                    </div>
                    <div class="menu-text">ä¸Šä¼ æ–‡ä»¶</div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨èšç„¦è¾“å…¥æ¡†
        window.onload = function() {
            document.querySelector('.input-area').focus();
            addBusinessExample();
        };
        
        // è¿”å›æŒ‰é’®åŠŸèƒ½ - ä¿®æ”¹ä¸ºè¿”å›ä¸Šä¸€é¡µ
        const backBtn = document.querySelector('.back-btn');
        backBtn.addEventListener('click', function() {
            window.history.back();
        });
        
        // å¤„ç†"+"æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        const plusBtn = document.querySelector('.plus-btn');
        const extendedMenu = document.querySelector('.extended-menu');
        let plusMenuVisible = false;
        
        plusBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            if (plusMenuVisible) {
                extendedMenu.style.display = 'none';
            } else {
                extendedMenu.style.display = 'flex';
            }
            plusMenuVisible = !plusMenuVisible;
        });
        
        // ç‚¹å‡»å…¶ä»–åŒºåŸŸå…³é—­æ‰©å±•èœå•
        document.addEventListener('click', function(e) {
            if (!plusBtn.contains(e.target) && !extendedMenu.contains(e.target) && plusMenuVisible) {
                extendedMenu.style.display = 'none';
                plusMenuVisible = false;
            }
        });
        
        // å¤„ç†ç›¸æœºæŒ‰é’®ç‚¹å‡»äº‹ä»¶
        const cameraBtn = document.querySelector('.camera-btn');
        cameraBtn.addEventListener('click', function() {
            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                alert('æ­£åœ¨æ‰“å¼€ç›¸æœº...');
            } else {
                alert('æ‚¨çš„è®¾å¤‡ä¸æ”¯æŒç›¸æœºåŠŸèƒ½');
            }
        });
        
        // å®ç°æ¶ˆæ¯å‘é€åŠŸèƒ½
        function sendMessage() {
            const inputArea = document.querySelector('.input-area');
            const text = inputArea.value.trim();
            if (!text) return;
            
            // åˆ›å»ºç”¨æˆ·æ¶ˆæ¯
            const userMsg = document.createElement('div');
            userMsg.className = 'message user';
            userMsg.innerHTML = '<div class="message-content">' + text + '</div>';
            
            // æ·»åŠ åˆ°æ¶ˆæ¯åˆ—è¡¨
            const chatMessages = document.querySelector('.chat-messages');
            chatMessages.appendChild(userMsg);
            
            // æ¸…ç©ºè¾“å…¥æ¡†
            inputArea.value = '';
            
            // æ»šåŠ¨åˆ°åº•éƒ¨
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // æ¨¡æ‹Ÿå°èˆµå›å¤
            setTimeout(() => {
                // æ˜¾ç¤ºæ­£åœ¨è¾“å…¥
                const typingMsg = document.createElement('div');
                typingMsg.className = 'message system typing';
                typingMsg.innerHTML = '<div class="message-content">å°èˆµæ­£åœ¨æ€è€ƒ...</div>';
                chatMessages.appendChild(typingMsg);
                chatMessages.scrollTop = chatMessages.scrollHeight;
                
                // æ¨¡æ‹Ÿå›å¤å»¶è¿Ÿ
                setTimeout(() => {
                    // ç§»é™¤"æ­£åœ¨è¾“å…¥"æç¤º
                    chatMessages.removeChild(typingMsg);
                    
                    // æ— è®ºç”¨æˆ·è¾“å…¥ä»€ä¹ˆï¼Œæ€»æ˜¯æ˜¾ç¤ºæ¬¢è¿è¯­å’Œæ¼”ç¤ºåœºæ™¯
                    const systemMsg = document.createElement('div');
                    systemMsg.className = 'message system';
                    systemMsg.innerHTML = '<div class="message-content"><p>æ¬¢è¿ä½¿ç”¨ç»è¥å†³ç­–æ™ºèƒ½ä½“ï¼Œæ‚¨å¯ä»¥éšæ—¶è·å–å®æ—¶ç»è¥æ•°æ®ï¼Œè¿›è¡Œæ·±åº¦åˆ†æï¼Œå¹¶è·å¾—æ™ºèƒ½åŒ–çš„ç»è¥å†³ç­–å»ºè®®ä¸é£é™©é¢„è­¦ã€‚</p><div style="margin-top: 10px; background: #f8f9fc; border-radius: 12px; padding: 12px;"><div style="margin-bottom: 8px; font-weight: 500; color: #333;">æ‚¨å¯ä»¥ä½“éªŒä»¥ä¸‹åœºæ™¯ï¼š</div><div style="display: flex; flex-direction: column; gap: 10px;"><div id="data-scenario-response" style="background: #E8F1FF; color: #1a73e8; padding: 10px 12px; border-radius: 12px; font-size: 14px; cursor: pointer;">ä¸€ã€ç»è¥æ•°æ®è·å–æ¨¡æ‹Ÿ</div><div id="decision-scenario-response" style="background: #E8F1FF; color: #1a73e8; padding: 10px 12px; border-radius: 12px; font-size: 14px; cursor: pointer;">äºŒã€ç»è¥å†³ç­–åˆ¶å®š</div></div></div><p style="margin-top: 8px; font-size: 13px; color: red;">ä»¥ä¸Šç»è¥åœºæ™¯ä»…ä½œä¸ºäº§å“æ¼”ç¤ºï¼ŒçœŸæ­£ä¸Šçº¿åCEOåœ¨è¾“å…¥æ¡†ç›´æ¥è¾“å…¥æç¤ºè¯æŸ¥è¯¢ç»è¥æ•°æ®æˆ–åˆ¶å®šå†³ç­–ã€‚</p></div>';
                    chatMessages.appendChild(systemMsg);
                    
                    // æ»šåŠ¨åˆ°åº•éƒ¨
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                    
                    // ç»™æ–°ç”Ÿæˆçš„æŒ‰é’®æ·»åŠ äº‹ä»¶ç›‘å¬
                    setTimeout(() => {
                        const dataScenarioResponse = document.getElementById('data-scenario-response');
                        const decisionScenarioResponse = document.getElementById('decision-scenario-response');
                        
                        if (dataScenarioResponse) {
                            dataScenarioResponse.addEventListener('click', startDataScenario);
                        }
                        
                        if (decisionScenarioResponse) {
                            decisionScenarioResponse.addEventListener('click', startDecisionScenario);
                        }
                    }, 100);
                    
                }, 1500);
            }, 500);
        }
        
        // ç›‘å¬è¾“å…¥æ¡†å›è½¦äº‹ä»¶
        document.querySelector('.input-area').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                sendMessage();
            }
        });
        
        // å¤„ç†å³ä¸Šè§’æ›´å¤šæŒ‰é’®ç‚¹å‡»äº‹ä»¶
        const moreBtn = document.querySelector('.more-btn');
        const moreMenu = document.querySelector('.more-menu');
        const overlay = document.querySelector('.overlay');
        let moreMenuVisible = false;
        
        // ç‚¹å‡»é®ç½©å±‚å…³é—­èœå•
        overlay.addEventListener('click', function() {
            moreMenu.style.display = 'none';
            overlay.style.display = 'none';
            moreMenuVisible = false;
        });
        
        // å¤„ç†å¼€å¯æ–°ä¼šè¯æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        const newChatBtn = document.querySelector('.new-chat-btn');
        newChatBtn.addEventListener('click', function() {
            // æ¸…ç©ºèŠå¤©æ¶ˆæ¯
            const chatMessages = document.querySelector('.chat-messages');
            chatMessages.innerHTML = '<div class="message-day">ä»Šå¤©</div><div class="message system"><div class="message-content">æ¬¢è¿ä½¿ç”¨ç»è¥å†³ç­–æ™ºèƒ½ä½“ï¼Œæ‚¨å¯ä»¥éšæ—¶è·å–å®æ—¶ç»è¥æ•°æ®ï¼Œè¿›è¡Œæ·±åº¦åˆ†æï¼Œå¹¶è·å¾—æ™ºèƒ½åŒ–çš„ç»è¥å†³ç­–å»ºè®®ä¸é£é™©é¢„è­¦ã€‚</div></div>';
            
            // å…³é—­èœå•
            moreMenu.style.display = 'none';
            overlay.style.display = 'none';
            moreMenuVisible = false;
        });
        
        // å¤„ç†å†å²è®°å½•ç‚¹å‡»äº‹ä»¶
        const historyItems = document.querySelectorAll('.history-item');
        historyItems.forEach(item => {
            item.addEventListener('click', function() {
                const historyTitle = this.querySelector('.history-title').textContent;
                
                // åŠ è½½ç›¸åº”çš„å†å²è®°å½•
                const chatMessages = document.querySelector('.chat-messages');
                
                // æ ¹æ®æ ‡é¢˜åŠ è½½ä¸åŒçš„å†å²è®°å½•
                if (historyTitle.includes('è¥æ”¶')) {
                    chatMessages.innerHTML = '<div class="message-day">ä»Šå¤©</div><div class="message user"><div class="message-content">æˆ‘æƒ³çœ‹çœ‹Q3å­£åº¦çš„è¥æ”¶æƒ…å†µå’Œé¢„æµ‹</div></div><div class="message system"><div class="message-content">æ ¹æ®æœ€æ–°æ•°æ®åˆ†æï¼ŒQ3å­£åº¦è¥æ”¶è¡¨ç°è‰¯å¥½ã€‚å½“å‰å®é™…è¥æ”¶2.1äº¿å…ƒï¼ŒåŒæ¯”å¢é•¿13.5%ï¼Œé¢„è®¡å­£åº¦æœ«å°†è¾¾åˆ°2.3äº¿å…ƒã€‚ä¸»è¦å¢é•¿æ¥æºæ˜¯Bç«¯å®¢æˆ·ç»­çº¦ç‡æå‡å’Œæ–°å®¢æˆ·æ‹“å±•æˆæ•ˆæ˜¾è‘—ã€‚</div></div>';
                } else if (historyTitle.includes('æˆæœ¬')) {
                    chatMessages.innerHTML = '<div class="message-day">ä»Šå¤©</div><div class="message user"><div class="message-content">æˆæœ¬æ§åˆ¶æ–¹é¢æœ‰ä»€ä¹ˆä¼˜åŒ–å»ºè®®ï¼Ÿ</div></div><div class="message system"><div class="message-content">é€šè¿‡æ•°æ®åˆ†æå‘ç°ä¸‰ä¸ªä¼˜åŒ–æœºä¼šï¼š1ï¼‰æŠ€æœ¯ç ”å‘æˆæœ¬å æ¯”è¿‡é«˜ï¼Œå»ºè®®ä¼˜åŒ–äººå‘˜é…ç½®ï¼›2ï¼‰å¸‚åœºæ¨å¹¿ROIå¯æå‡15%ï¼›3ï¼‰è¿è¥æˆæœ¬ä¸­åŠå…¬åœºåœ°è´¹ç”¨æœ‰å‹ç¼©ç©ºé—´ã€‚é¢„è®¡æ•´ä½“å¯é™ä½æˆæœ¬8-12%ã€‚</div></div>';
                } else if (historyTitle.includes('ç°é‡‘æµ')) {
                    chatMessages.innerHTML = '<div class="message-day">æ˜¨å¤©</div><div class="message user"><div class="message-content">ç°é‡‘æµç®¡ç†éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ</div></div><div class="message system"><div class="message-content">å½“å‰ç°é‡‘æµçŠ¶å†µæ€»ä½“å¥åº·ï¼Œä½†éœ€å…³æ³¨ï¼š1ï¼‰åº”æ”¶è´¦æ¬¾å›æ”¶å‘¨æœŸç•¥é•¿ï¼Œå»ºè®®åŠ å¼ºå‚¬æ”¶ï¼›2ï¼‰Q4æœ‰å¤§é¢è®¾å¤‡é‡‡è´­è®¡åˆ’ï¼Œéœ€æå‰å®‰æ’èµ„é‡‘ï¼›3ï¼‰å»ºè®®ä¿æŒ1.5ä¸ªæœˆè¿è¥èµ„é‡‘å‚¨å¤‡ã€‚</div></div>';
                } else if (historyTitle.includes('æŠ•èµ„å›æŠ¥')) {
                    chatMessages.innerHTML = '<div class="message-day">æ˜¨å¤©</div><div class="message user"><div class="message-content">å„é¡¹æŠ•èµ„çš„å›æŠ¥ç‡å¦‚ä½•ï¼Ÿ</div></div><div class="message system"><div class="message-content">æŠ€æœ¯ç ”å‘æŠ•èµ„ROIè¾¾åˆ°245%ï¼Œå¸‚åœºæ¨å¹¿ROIä¸º180%ï¼Œäººå‘˜åŸ¹è®­æŠ•èµ„å›æŠ¥156%ã€‚å»ºè®®ç»§ç»­åŠ å¤§æŠ€æœ¯ç ”å‘æŠ•å…¥ï¼Œä¼˜åŒ–å¸‚åœºæ¨å¹¿ç­–ç•¥ï¼Œäººå‘˜åŸ¹è®­æŠ•èµ„ä¿æŒç°æœ‰æ°´å¹³ã€‚</div></div>';
                } else if (historyTitle.includes('é¢„ç®—')) {
                    chatMessages.innerHTML = '<div class="message-day">6æœˆ15æ—¥</div><div class="message user"><div class="message-content">ä¸‹åŠå¹´å¸‚åœºæ‹“å±•é¢„ç®—æ€ä¹ˆåˆ†é…ï¼Ÿ</div></div><div class="message system"><div class="message-content">å»ºè®®æ€»é¢„ç®—800ä¸‡å…ƒï¼Œå…¶ä¸­ï¼šçº¿ä¸Šæ¨å¹¿40%ï¼ˆ320ä¸‡ï¼‰ï¼Œçº¿ä¸‹æ´»åŠ¨30%ï¼ˆ240ä¸‡ï¼‰ï¼Œæ¸ é“åˆä½œ20%ï¼ˆ160ä¸‡ï¼‰ï¼Œå“ç‰Œå»ºè®¾10%ï¼ˆ80ä¸‡ï¼‰ã€‚é‡ç‚¹æŠ•å…¥åä¸œå’Œåå—å¸‚åœºï¼Œé¢„æœŸæ–°å¢å®¢æˆ·120å®¶ã€‚</div></div>';
                }
                
                // å…³é—­èœå•
                moreMenu.style.display = 'none';
                overlay.style.display = 'none';
                moreMenuVisible = false;
                
                // æ»šåŠ¨åˆ°åº•éƒ¨
                chatMessages.scrollTop = chatMessages.scrollHeight;
            });
        });
        
        // æ·»åŠ ç»è¥å†³ç­–ç¤ºä¾‹
        function addBusinessExample() {
            const chatMessages = document.querySelector('.chat-messages');
            
            // Clear current messages
            chatMessages.innerHTML = '<div class="message-day">ä»Šå¤©</div>';
            
            // Add welcome message
            addSystemMessage('<p>æ¬¢è¿ä½¿ç”¨ç»è¥å†³ç­–æ™ºèƒ½ä½“ï¼Œæ‚¨å¯ä»¥éšæ—¶è·å–å®æ—¶ç»è¥æ•°æ®ï¼Œè¿›è¡Œæ·±åº¦åˆ†æï¼Œå¹¶è·å¾—æ™ºèƒ½åŒ–çš„ç»è¥å†³ç­–å»ºè®®ä¸é£é™©é¢„è­¦ã€‚</p><div style="margin-top: 10px; background: #f8f9fc; border-radius: 12px; padding: 12px;"><div style="margin-bottom: 8px; font-weight: 500; color: #333;">æ‚¨å¯ä»¥ä½“éªŒä»¥ä¸‹åœºæ™¯ï¼š</div><div style="display: flex; flex-direction: column; gap: 10px;"><div id="data-scenario" style="background: #E8F1FF; color: #1a73e8; padding: 10px 12px; border-radius: 12px; font-size: 14px; cursor: pointer;">ä¸€ã€ç»è¥æ•°æ®è·å–æ¨¡æ‹Ÿ</div><div id="decision-scenario" style="background: #E8F1FF; color: #1a73e8; padding: 10px 12px; border-radius: 12px; font-size: 14px; cursor: pointer;">äºŒã€ç»è¥å†³ç­–åˆ¶å®š</div></div></div><p style="margin-top: 8px; font-size: 13px; color: red;">ä»¥ä¸Šç»è¥åœºæ™¯ä»…ä½œä¸ºäº§å“æ¼”ç¤ºï¼ŒçœŸæ­£ä¸Šçº¿åCEOåœ¨è¾“å…¥æ¡†ç›´æ¥è¾“å…¥æç¤ºè¯æŸ¥è¯¢ç»è¥æ•°æ®æˆ–åˆ¶å®šå†³ç­–ã€‚</p>');
            
            // Add click event listeners to scenario buttons after they are created
            setTimeout(() => {
                const dataScenario = document.getElementById('data-scenario');
                const decisionScenario = document.getElementById('decision-scenario');
                
                if (dataScenario) {
                    dataScenario.addEventListener('click', startDataScenario);
                }
                
                if (decisionScenario) {
                    decisionScenario.addEventListener('click', startDecisionScenario);
                }
            }, 100);
        }
        
        // ç»è¥æ•°æ®è·å–åœºæ™¯æ¨¡æ‹Ÿ - ä¿®æ”¹è¿™ä¸ªå‡½æ•°
        function startDataScenario() {
            const chatMessages = document.querySelector('.chat-messages');
            
            addSystemMessage('æ‚¨å·²é€‰æ‹©ï¼š<strong>ç»è¥æ•°æ®è·å–æ¨¡æ‹Ÿ</strong>');
            addSystemMessage('è¯·è¾“å…¥æ‚¨æƒ³æŸ¥è¯¢çš„ç»è¥æ•°æ®');
            
            document.querySelector('.input-area').focus();
            
            setTimeout(() => {
                addUserMessage('æŸ¥è¯¢ä»Šæ—¥èµ„é‡‘æµå‘å’Œç°é‡‘æµçŠ¶å†µ');
                
                setTimeout(() => {
                    const systemMsg = document.createElement('div');
                    systemMsg.className = 'message system';
                    systemMsg.innerHTML = '<div class="message-content"><p><strong>ä»Šæ—¥èµ„é‡‘æµå‘åˆ†ææŠ¥å‘Š</strong>ï¼š</p><div style="margin-top: 12px; background: #f8f9fc; border-radius: 12px; padding: 16px;"><div style="margin-bottom: 16px;"><div style="font-weight: 500; color: #1a73e8; margin-bottom: 12px;">ğŸ“Š æ ¸å¿ƒæŒ‡æ ‡æ¦‚è§ˆ</div><div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; margin-bottom: 16px;"><div style="background: #fff; border-radius: 8px; padding: 12px; text-align: center; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border-left: 3px solid #34C759;"><div style="font-size: 18px; font-weight: 600; color: #34C759;">27ä¸‡</div><div style="font-size: 12px; color: #666; margin-top: 4px;">èµ„é‡‘æµå…¥</div></div><div style="background: #fff; border-radius: 8px; padding: 12px; text-align: center; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border-left: 3px solid #FF3B30;"><div style="font-size: 18px; font-weight: 600; color: #FF3B30;">68ä¸‡</div><div style="font-size: 12px; color: #666; margin-top: 4px;">èµ„é‡‘æµå‡º</div></div><div style="background: #fff; border-radius: 8px; padding: 12px; text-align: center; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border-left: 3px solid #007AFF;"><div style="font-size: 18px; font-weight: 600; color: #007AFF;">1,600ä¸‡</div><div style="font-size: 12px; color: #666; margin-top: 4px;">ç°é‡‘ä½™é¢</div></div></div></div><div style="margin-bottom: 16px;"><div style="font-weight: 500; color: #1a73e8; margin-bottom: 8px;">ğŸ“ˆ èµ„é‡‘æµå‘ç»“æ„åˆ†æ</div><div style="background: #fff; border-radius: 8px; padding: 12px;"><div style="margin-bottom: 12px; border-bottom: 1px solid #f0f0f0; padding-bottom: 8px;"><div style="font-weight: 500; margin-bottom: 6px; color: #34C759;">èµ„é‡‘æµå…¥æ„æˆï¼ˆ27ä¸‡å…ƒï¼‰</div><div style="display: flex; align-items: center; margin-bottom: 4px;"><div style="width: 80px; font-size: 13px;">é”€å”®å›æ¬¾</div><div style="flex: 1; height: 6px; background: #f1f1f1; border-radius: 3px; margin: 0 10px; overflow: hidden;"><div style="width: 81.5%; height: 100%; background: #34C759;"></div></div><div style="font-size: 13px; font-weight: 500;">22ä¸‡</div></div><div style="display: flex; align-items: center;"><div style="width: 80px; font-size: 13px;">å…¶ä»–æ”¶æ¬¾</div><div style="flex: 1; height: 6px; background: #f1f1f1; border-radius: 3px; margin: 0 10px; overflow: hidden;"><div style="width: 18.5%; height: 100%; background: #34C759;"></div></div><div style="font-size: 13px; font-weight: 500;">5ä¸‡</div></div></div><div><div style="font-weight: 500; margin-bottom: 6px; color: #FF3B30;">èµ„é‡‘æµå‡ºæ„æˆï¼ˆ68ä¸‡å…ƒï¼‰</div><div style="display: flex; align-items: center; margin-bottom: 4px;"><div style="width: 80px; font-size: 13px;">ææ–™é‡‡è´­</div><div style="flex: 1; height: 6px; background: #f1f1f1; border-radius: 3px; margin: 0 10px; overflow: hidden;"><div style="width: 64.7%; height: 100%; background: #FF3B30;"></div></div><div style="font-size: 13px; font-weight: 500;">44ä¸‡</div></div><div style="display: flex; align-items: center; margin-bottom: 4px;"><div style="width: 80px; font-size: 13px;">ä»£æ”¶ä»£ä»˜</div><div style="flex: 1; height: 6px; background: #f1f1f1; border-radius: 3px; margin: 0 10px; overflow: hidden;"><div style="width: 17.6%; height: 100%; background: #FF3B30;"></div></div><div style="font-size: 13px; font-weight: 500;">12ä¸‡</div></div><div style="display: flex; align-items: center; margin-bottom: 4px;"><div style="width: 80px; font-size: 13px;">ç¨è´¹æ”¯å‡º</div><div style="flex: 1; height: 6px; background: #f1f1f1; border-radius: 3px; margin: 0 10px; overflow: hidden;"><div style="width: 10.3%; height: 100%; background: #FF3B30;"></div></div><div style="font-size: 13px; font-weight: 500;">7ä¸‡</div></div><div style="display: flex; align-items: center;"><div style="width: 80px; font-size: 13px;">å…¶ä»–æ”¯å‡º</div><div style="flex: 1; height: 6px; background: #f1f1f1; border-radius: 3px; margin: 0 10px; overflow: hidden;"><div style="width: 7.4%; height: 100%; background: #FF3B30;"></div></div><div style="font-size: 13px; font-weight: 500;">5ä¸‡</div></div></div></div></div><div style="margin-bottom: 16px;"><div style="font-weight: 500; color: #1a73e8; margin-bottom: 8px;">ğŸ“‹ å„ä¸šåŠ¡å•å…ƒèµ„é‡‘çŠ¶å†µ</div><div style="background: #fff; border-radius: 8px; padding: 12px;"><table style="width: 100%; font-size: 12px;"><tr style="background: #f8f9fc;"><th style="padding: 6px; text-align: left;">ä¸šåŠ¡å•å…ƒ</th><th style="padding: 6px; text-align: right;">ç°é‡‘ä½™é¢</th><th style="padding: 6px; text-align: right;">å¯ç”¨èµ„é‡‘</th><th style="padding: 6px; text-align: center;">çŠ¶æ€</th></tr><tr><td style="padding: 6px; font-weight: 500;">åç§‘ç”µå­</td><td style="padding: 6px; text-align: right;">777ä¸‡</td><td style="padding: 6px; text-align: right;">168ä¸‡</td><td style="padding: 6px; text-align: center;"><span style="background: #e8f5e9; color: #27ae60; padding: 2px 6px; border-radius: 4px; font-size: 10px;">å¥åº·</span></td></tr><tr><td style="padding: 6px; font-weight: 500;">çŒè±¹äº¤é€š</td><td style="padding: 6px; text-align: right;">390ä¸‡</td><td style="padding: 6px; text-align: right;">0ä¸‡</td><td style="padding: 6px; text-align: center;"><span style="background: #fff3e0; color: #e67e22; padding: 2px 6px; border-radius: 4px; font-size: 10px;">ç´§å¼ </span></td></tr><tr><td style="padding: 6px; font-weight: 500;">äº§ä¸šå›­åŒº</td><td style="padding: 6px; text-align: right;">187ä¸‡</td><td style="padding: 6px; text-align: right;">87ä¸‡</td><td style="padding: 6px; text-align: center;"><span style="background: #e8f5e9; color: #27ae60; padding: 2px 6px; border-radius: 4px; font-size: 10px;">æ­£å¸¸</span></td></tr><tr><td style="padding: 6px; font-weight: 500;">è”åˆç»è¥</td><td style="padding: 6px; text-align: right;">99ä¸‡</td><td style="padding: 6px; text-align: right;">2ä¸‡</td><td style="padding: 6px; text-align: center;"><span style="background: #ffebee; color: #e74c3c; padding: 2px 6px; border-radius: 4px; font-size: 10px;">é¢„è­¦</span></td></tr></table></div></div><div style="margin-bottom: 16px;"><div style="font-weight: 500; color: #e67e22; margin-bottom: 8px;">âš ï¸ é£é™©é¢„è­¦</div><div style="background: #fff3e0; border-radius: 8px; padding: 12px;"><div style="display: flex; align-items: center; margin-bottom: 8px;"><i class="ri-error-warning-line" style="color: #e67e22; font-size: 16px; margin-right: 8px;"></i><div style="font-size: 13px; font-weight: 500;">èµ„é‡‘æµå‡ºè¶…è¿‡æµå…¥41ä¸‡å…ƒï¼Œéœ€å…³æ³¨ç°é‡‘æµå‹åŠ›</div></div><div style="display: flex; align-items: center; margin-bottom: 8px;"><i class="ri-error-warning-line" style="color: #e67e22; font-size: 16px; margin-right: 8px;"></i><div style="font-size: 13px; font-weight: 500;">çŒè±¹äº¤é€šå¯ç”¨èµ„é‡‘ä¸º0ï¼Œå­˜åœ¨æµåŠ¨æ€§é£é™©</div></div><div style="display: flex; align-items: center;"><i class="ri-error-warning-line" style="color: #e67e22; font-size: 16px; margin-right: 8px;"></i><div style="font-size: 13px; font-weight: 500;">ææ–™é‡‡è´­æ”¯å‡ºå æ¯”è¿‡é«˜ï¼ˆ64.7%ï¼‰ï¼Œéœ€ä¼˜åŒ–ä¾›åº”é“¾æˆæœ¬</div></div></div></div><div><div style="font-weight: 500; color: #27ae60; margin-bottom: 8px;">ğŸ’¡ å»ºè®®æªæ–½</div><div style="background: #e8f5e9; border-radius: 8px; padding: 12px;"><div style="margin-bottom: 8px;"><div style="font-weight: 500; margin-bottom: 4px; color: #27ae60;">çŸ­æœŸæªæ–½ï¼ˆ1-2å‘¨å†…ï¼‰</div><div style="font-size: 13px; color: #666;">1. åŠ å¼ºé”€å”®å›æ¬¾å‚¬æ”¶ï¼Œé‡ç‚¹å…³æ³¨å¤§å®¢æˆ·å›æ¬¾æ—¶é—´</div><div style="font-size: 13px; color: #666;">2. æš‚ç¼“éå¿…è¦çš„ææ–™é‡‡è´­ï¼Œä¼˜åŒ–åº“å­˜ç®¡ç†</div><div style="font-size: 13px; color: #666;">3. ä¸ºçŒè±¹äº¤é€šè°ƒé…20-30ä¸‡æµåŠ¨èµ„é‡‘</div></div><div><div style="font-weight: 500; margin-bottom: 4px; color: #27ae60;">ä¸­æœŸæªæ–½ï¼ˆ1ä¸ªæœˆå†…ï¼‰</div><div style="font-size: 13px; color: #666;">1. å»ºç«‹å„BGé—´èµ„é‡‘è°ƒé…æœºåˆ¶ï¼Œæé«˜èµ„é‡‘ä½¿ç”¨æ•ˆç‡</div><div style="font-size: 13px; color: #666;">2. é‡æ–°è¯„ä¼°ææ–™é‡‡è´­ä»·æ ¼ï¼Œå¯»æ‰¾æ›´ä¼˜è´¨ä¾›åº”å•†</div><div style="font-size: 13px; color: #666;">3. åˆ¶å®šå„ä¸šåŠ¡å•å…ƒæœ€ä½å¯ç”¨èµ„é‡‘æ ‡å‡†</div></div></div></div></div></div><p style="margin-top: 12px;">æ‚¨è¿˜æƒ³äº†è§£å…¶ä»–æ–¹é¢çš„æ•°æ®å—ï¼Ÿæ¯”å¦‚å¹´åº¦ç´¯è®¡å¯¹æ¯”æˆ–å¤§é¢èµ„é‡‘æ˜ç»†ã€‚</p></div>';
                    chatMessages.appendChild(systemMsg);
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }, 1000);
                
                setTimeout(() => {
                    addUserMessage('å¹´åº¦ç´¯è®¡æƒ…å†µå¦‚ä½•ï¼Ÿä¸å»å¹´åŒæœŸç›¸æ¯”æœ‰ä»€ä¹ˆå˜åŒ–ï¼Ÿ');
                    
                    setTimeout(() => {
                        const systemMsg = document.createElement('div');
                        systemMsg.className = 'message system';
                        systemMsg.innerHTML = '<div class="message-content"><p><strong>å¹´åº¦ç´¯è®¡èµ„é‡‘åˆ†æå¯¹æ¯”</strong>ï¼š</p><div style="margin-top: 12px; background: #f8f9fc; border-radius: 12px; padding: 16px;"><div style="margin-bottom: 16px;"><div style="font-weight: 500; color: #1a73e8; margin-bottom: 8px;">ğŸ“Š å¹´åº¦ç´¯è®¡æ•°æ®å¯¹æ¯”ï¼ˆä¸‡å…ƒï¼‰</div><div style="background: #fff; border-radius: 8px; padding: 12px; margin-bottom: 12px;"><table style="width: 100%; font-size: 13px;"><tr style="background: #f8f9fc;"><th style="padding: 8px; text-align: left;">æŒ‡æ ‡</th><th style="padding: 8px; text-align: right;">æœ¬å¹´ç´¯è®¡</th><th style="padding: 8px; text-align: right;">å»å¹´åŒæœŸ</th><th style="padding: 8px; text-align: right;">åŒæ¯”å˜åŒ–</th></tr><tr><td style="padding: 8px; font-weight: 500;">èµ„é‡‘æµå…¥</td><td style="padding: 8px; text-align: right; color: #34C759; font-weight: 600;">47,000</td><td style="padding: 8px; text-align: right;">38,700</td><td style="padding: 8px; text-align: right; color: #34C759; font-weight: 500;">+21.4% â†—</td></tr><tr><td style="padding: 8px; font-weight: 500;">èµ„é‡‘æµå‡º</td><td style="padding: 8px; text-align: right; color: #FF3B30; font-weight: 600;">46,000</td><td style="padding: 8px; text-align: right;">39,200</td><td style="padding: 8px; text-align: right; color: #FF3B30; font-weight: 500;">+17.3% â†—</td></tr><tr style="background: #f0f5ff;"><td style="padding: 8px; font-weight: 600;">å‡€ç°é‡‘æµ</td><td style="padding: 8px; text-align: right; color: #007AFF; font-weight: 600;">+1,000</td><td style="padding: 8px; text-align: right;">-500</td><td style="padding: 8px; text-align: right; color: #34C759; font-weight: 600;">æ‰­äºä¸ºç›ˆ ğŸ‰</td></tr></table></div><div style="background: #e8f1ff; border-radius: 8px; padding: 12px;"><div style="font-weight: 500; margin-bottom: 6px; color: #1a73e8;">ğŸ’¹ å¹´åº¦è¶‹åŠ¿å›¾è¡¨</div><div style="background: #fff; border-radius: 6px; padding: 8px; margin: 8px 0;"><div style="display: flex; justify-content: space-between; align-items: end; height: 80px; border-bottom: 1px solid #eee;"><div style="display: flex; flex-direction: column; align-items: center;"><div style="width: 20px; height: 47px; background: linear-gradient(to top, #FF9F43, #FFB976); border-radius: 2px; margin-bottom: 4px;"></div><div style="font-size: 10px; color: #666;">æœ¬å¹´æµå…¥</div><div style="font-size: 10px; font-weight: 500;">47,000</div></div><div style="display: flex; flex-direction: column; align-items: center;"><div style="width: 20px; height: 39px; background: linear-gradient(to top, #5A8DEE, #7BA7F7); border-radius: 2px; margin-bottom: 4px;"></div><div style="font-size: 10px; color: #666;">å»å¹´æµå…¥</div><div style="font-size: 10px; font-weight: 500;">38,700</div></div><div style="display: flex; flex-direction: column; align-items: center;"><div style="width: 20px; height: 46px; background: linear-gradient(to top, #FF6B9D, #FF8FB3); border-radius: 2px; margin-bottom: 4px;"></div><div style="font-size: 10px; color: #666;">æœ¬å¹´æµå‡º</div><div style="font-size: 10px; font-weight: 500;">46,000</div></div><div style="display: flex; flex-direction: column; align-items: center;"><div style="width: 20px; height: 39px; background: linear-gradient(to top, #C44569, #D8667A); border-radius: 2px; margin-bottom: 4px;"></div><div style="font-size: 10px; color: #666;">å»å¹´æµå‡º</div><div style="font-size: 10px; font-weight: 500;">39,200</div></div></div></div></div></div><div style="margin-bottom: 16px;"><div style="font-weight: 500; color: #1a73e8; margin-bottom: 8px;">ğŸ“ˆ å…³é”®å˜åŒ–åˆ†æ</div><div style="background: #fff; border-radius: 8px; padding: 12px;"><div style="margin-bottom: 12px;"><div style="font-weight: 500; margin-bottom: 6px; color: #34C759;">âœ… ç§¯æå˜åŒ–</div><div style="font-size: 13px; color: #333; margin-bottom: 4px;">â€¢ <strong>æ”¶å…¥å¢é•¿å¼ºåŠ²</strong>ï¼šæµå…¥èµ„é‡‘åŒæ¯”å¢é•¿21.4%ï¼Œè¯´æ˜ä¸šåŠ¡æ‹“å±•æ•ˆæœæ˜¾è‘—</div><div style="font-size: 13px; color: #333; margin-bottom: 4px;">â€¢ <strong>ç›ˆåˆ©èƒ½åŠ›æå‡</strong>ï¼šä»å»å¹´åŒæœŸäºæŸ500ä¸‡è½¬ä¸ºç›ˆåˆ©1,000ä¸‡</div><div style="font-size: 13px; color: #333;">â€¢ <strong>ç°é‡‘ç®¡ç†æ”¹å–„</strong>ï¼šæµå‡ºå¢å¹…ï¼ˆ17.3%ï¼‰ä½äºæµå…¥å¢å¹…ï¼ˆ21.4%ï¼‰</div></div><div><div style="font-weight: 500; margin-bottom: 6px; color: #e67e22;">âš ï¸ éœ€è¦å…³æ³¨</div><div style="font-size: 13px; color: #333; margin-bottom: 4px;">â€¢ <strong>æ”¯å‡ºå¢é•¿è¾ƒå¿«</strong>ï¼šæµå‡ºåŒæ¯”å¢é•¿17.3%ï¼Œéœ€å…³æ³¨æˆæœ¬æ§åˆ¶</div><div style="font-size: 13px; color: #333; margin-bottom: 4px;">â€¢ <strong>å¢é•¿è´¨é‡</strong>ï¼šéœ€åˆ†ææ”¶å…¥å¢é•¿çš„å¯æŒç»­æ€§å’Œæˆæœ¬ç»“æ„</div><div style="font-size: 13px; color: #333;">â€¢ <strong>å­£åº¦æ³¢åŠ¨</strong>ï¼šéœ€å…³æ³¨å„å­£åº¦èµ„é‡‘æµçš„å‡è¡¡æ€§</div></div></div></div><div style="margin-bottom: 16px;"><div style="font-weight: 500; color: #1a73e8; margin-bottom: 8px;">ğŸ¯ æœªæ¥3ä¸ªæœˆé¢„æµ‹</div><div style="background: #f0f5ff; border-radius: 8px; padding: 12px;"><div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; margin-bottom: 12px;"><div style="text-align: center; background: #fff; border-radius: 6px; padding: 8px;"><div style="font-size: 11px; color: #666;">Q4é¢„æµ‹æµå…¥</div><div style="font-size: 16px; font-weight: 600; color: #34C759;">15,000ä¸‡</div></div><div style="text-align: center; background: #fff; border-radius: 6px; padding: 8px;"><div style="font-size: 11px; color: #666;">Q4é¢„æµ‹æµå‡º</div><div style="font-size: 16px; font-weight: 600; color: #FF3B30;">14,200ä¸‡</div></div><div style="text-align: center; background: #fff; border-radius: 6px; padding: 8px;"><div style="font-size: 11px; color: #666;">é¢„æœŸå‡€æµå…¥</div><div style="font-size: 16px; font-weight: 600; color: #007AFF;">+800ä¸‡</div></div></div><div style="font-size: 12px; color: #666; text-align: center;">åŸºäºå†å²æ•°æ®å’Œå½“å‰è¶‹åŠ¿é¢„æµ‹ï¼Œå»ºè®®æå‰åšå¥½èµ„é‡‘è°ƒé…å®‰æ’</div></div></div><div><div style="font-weight: 500; color: #27ae60; margin-bottom: 8px;">ğŸš€ æˆ˜ç•¥å»ºè®®</div><div style="background: #e8f5e9; border-radius: 8px; padding: 12px;"><div style="margin-bottom: 8px;"><div style="font-weight: 500; margin-bottom: 4px; color: #27ae60;">1. æ”¶å…¥ç«¯ä¼˜åŒ–</div><div style="font-size: 13px; color: #666;">ç»§ç»­åŠ å¤§å¸‚åœºå¼€æ‹“åŠ›åº¦ï¼Œé‡ç‚¹å…³æ³¨é«˜åˆ©æ¶¦ä¸šåŠ¡ï¼Œç¡®ä¿æ”¶å…¥å¢é•¿çš„å¯æŒç»­æ€§</div></div><div style="margin-bottom: 8px;"><div style="font-weight: 500; margin-bottom: 4px; color: #27ae60;">2. æˆæœ¬ç«¯æ§åˆ¶</div><div style="font-size: 13px; color: #666;">å»ºç«‹æˆæœ¬åŠ¨æ€ç›‘æ§æœºåˆ¶ï¼Œé‡ç‚¹æ§åˆ¶ææ–™é‡‡è´­å’Œè¿è¥æˆæœ¬ï¼Œç›®æ ‡æ§åˆ¶æµå‡ºå¢å¹…åœ¨15%ä»¥å†…</div></div><div><div style="font-weight: 500; margin-bottom: 4px; color: #27ae60;">3. èµ„é‡‘ç«¯ç®¡ç†</div><div style="font-size: 13px; color: #666;">å»ºç«‹é›†å›¢èµ„é‡‘æ± ç®¡ç†æœºåˆ¶ï¼Œæé«˜èµ„é‡‘ä½¿ç”¨æ•ˆç‡ï¼Œä¸ºæ˜å¹´ä¸šåŠ¡æ‰©å¼ åšå¥½èµ„é‡‘å‚¨å¤‡</div></div></div></div></div></div><p style="margin-top: 12px;">æ•°æ®æ˜¾ç¤ºå…¬å¸ç»è¥çŠ¶å†µè‰¯å¥½ï¼Œæ‚¨æ˜¯å¦éœ€è¦äº†è§£å…·ä½“çš„å¤§é¢èµ„é‡‘æµå‘æ˜ç»†ï¼Ÿ</p></div>';
                    chatMessages.appendChild(systemMsg);
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }, 1200);
            }, 3000);
            
            setTimeout(() => {
                addUserMessage('æ˜¾ç¤ºå¤§é¢èµ„é‡‘æ˜ç»†ï¼Œç‰¹åˆ«æ˜¯è¶…è¿‡10ä¸‡çš„å•ç¬”èµ„é‡‘');
                
                setTimeout(() => {
                    const systemMsg = document.createElement('div');
                    systemMsg.className = 'message system';
                    systemMsg.innerHTML = '<div class="message-content"><p><strong>å¤§é¢èµ„é‡‘æ˜ç»†åˆ†æ</strong>ï¼š</p><div style="margin-top: 12px; background: #f8f9fc; border-radius: 12px; padding: 16px;"><div style="margin-bottom: 16px;"><div style="font-weight: 500; color: #1a73e8; margin-bottom: 8px;">ğŸ’° 10ä¸‡ä»¥ä¸Šèµ„é‡‘æµå‘æ˜ç»†</div><div style="background: #f0fff5; border-radius: 8px; padding: 12px; margin-bottom: 12px; border-left: 4px solid #34C759;"><div style="font-weight: 500; margin-bottom: 8px; color: #34C759; display: flex; align-items: center;"><i class="ri-arrow-down-circle-line" style="margin-right: 6px; font-size: 16px;"></i>å¤§é¢èµ„é‡‘æµå…¥</div><div style="background: #fff; border-radius: 6px; padding: 10px; margin-bottom: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);"><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;"><div style="font-weight: 500; font-size: 14px;">ä¸­å›½å·¥å•†é“¶è¡ŒåŒ—äº¬å¸‚åˆ†è¡Œ</div><div style="font-size: 16px; font-weight: 600; color: #34C759;">372.19ä¸‡å…ƒ</div></div><div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; font-size: 12px; color: #666;"><div><span style="color: #999;">æ”¶æ¬¾å•ä½:</span> åç§‘ç”µå­BG</div><div><span style="color: #999;">ç±»åˆ«:</span> é”€å”®å›æ¬¾</div><div><span style="color: #999;">ç»æ‰‹äºº:</span> äºå¿—å›½</div></div></div><div style="background: #fff; border-radius: 6px; padding: 10px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);"><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;"><div style="font-weight: 500; font-size: 14px;">ä¸­å›½ç§»åŠ¨æ‰¬å·åˆ†å…¬å¸</div><div style="font-size: 16px; font-weight: 600; color: #34C759;">10.20ä¸‡å…ƒ</div></div><div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; font-size: 12px; color: #666;"><div><span style="color: #999;">æ”¶æ¬¾å•ä½:</span> åç§‘ç”µå­BG</div><div><span style="color: #999;">ç±»åˆ«:</span> é”€å”®å›æ¬¾</div><div><span style="color: #999;">ç»æ‰‹äºº:</span> å•å‰æ—</div></div></div></div><div style="background: #fff2f2; border-radius: 8px; padding: 12px; border-left: 4px solid #FF3B30;"><div style="font-weight: 500; margin-bottom: 8px; color: #FF3B30; display: flex; align-items: center;"><i class="ri-arrow-up-circle-line" style="margin-right: 6px; font-size: 16px;"></i>å¤§é¢èµ„é‡‘æµå‡º</div><div style="background: #fff; border-radius: 6px; padding: 10px; margin-bottom: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);"><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;"><div style="font-weight: 500; font-size: 14px;">å½’è¿˜é“¶è¡Œè´·æ¬¾</div><div style="font-size: 16px; font-weight: 600; color: #FF3B30;">100.00ä¸‡å…ƒ</div></div><div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; font-size: 12px; color: #666; margin-bottom: 8px;"><div><span style="color: #999;">ä»˜æ¬¾å•ä½:</span> é›†å›¢æ€»éƒ¨</div><div><span style="color: #999;">ç±»åˆ«:</span> å¿è¿˜è´·æ¬¾</div><div><span style="color: #999;">ç»æ‰‹äºº:</span> æ¨æˆ</div></div><div style="background: #f9f9fb; border-radius: 4px; padding: 6px; font-size: 12px; color: #666;"><span style="color: #999;">å¤‡æ³¨:</span> æŒ‰åˆåŒçº¦å®šè¿˜æ¬¾ï¼Œæ»´å‘é•¿æœŸè´·æ¬¾</div></div><div style="background: #fff; border-radius: 6px; padding: 10px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);"><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;"><div style="font-weight: 500; font-size: 14px;">æ”¯ä»˜è´·æ¬¾åˆ©æ¯</div><div style="font-size: 16px; font-weight: 600; color: #FF3B30;">11.03ä¸‡å…ƒ</div></div><div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; font-size: 12px; color: #666;"><div><span style="color: #999;">ä»˜æ¬¾å•ä½:</span> é›†å›¢æ€»éƒ¨</div><div><span style="color: #999;">ç±»åˆ«:</span> åˆ©æ¯æ”¯å‡º</div><div><span style="color: #999;">ç»æ‰‹äºº:</span> é½å†¬ç‘¾</div></div></div></div></div><div style="margin-bottom: 16px;"><div style="font-weight: 500; color: #1a73e8; margin-bottom: 8px;">ğŸ“Š å¤§é¢èµ„é‡‘ç»Ÿè®¡åˆ†æ</div><div style="background: #fff; border-radius: 8px; padding: 12px;"><div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 12px;"><div><div style="font-size: 12px; color: #666; margin-bottom: 4px;">å¤§é¢æµå…¥å æ¯”</div><div style="display: flex; align-items: center;"><div style="font-size: 18px; font-weight: 600; color: #34C759; margin-right: 8px;">87.2%</div><div style="font-size: 11px; color: #666;">(382.39ä¸‡/438ä¸‡)</div></div><div style="height: 6px; background: #f1f1f1; border-radius: 3px; overflow: hidden; margin-top: 4px;"><div style="width: 87.2%; height: 100%; background: #34C759;"></div></div></div><div><div style="font-size: 12px; color: #666; margin-bottom: 4px;">å¤§é¢æµå‡ºå æ¯”</div><div style="display: flex; align-items: center;"><div style="font-size: 18px; font-weight: 600; color: #FF3B30; margin-right: 8px;">45.1%</div><div style="font-size: 11px; color: #666;">(111.03ä¸‡/246ä¸‡)</div></div><div style="height: 6px; background: #f1f1f1; border-radius: 3px; overflow: hidden; margin-top: 4px;"><div style="width: 45.1%; height: 100%; background: #FF3B30;"></div></div></div></div><div style="background: #f8f9fc; border-radius: 6px; padding: 8px;"><div style="font-size: 12px; color: #666; margin-bottom: 4px;">èµ„é‡‘é›†ä¸­åº¦åˆ†æï¼š</div><div style="font-size: 13px; color: #333;">â€¢ å¤§é¢æµå…¥ä¸»è¦æ¥æºäºåç§‘ç”µå­BGï¼Œå®¢æˆ·é›†ä¸­åº¦è¾ƒé«˜</div><div style="font-size: 13px; color: #333;">â€¢ å¤§é¢æµå‡ºä¸»è¦ä¸ºé‡‘èæœºæ„è¿˜æ¬¾ï¼Œèµ„é‡‘æˆæœ¬æ§åˆ¶è‰¯å¥½</div></div></div></div><div style="margin-bottom: 16px;"><div style="font-weight: 500; color: #e67e22; margin-bottom: 8px;">âš ï¸ é£é™©æç¤º</div><div style="background: #fff3e0; border-radius: 8px; padding: 12px;"><div style="display: flex; align-items: center; margin-bottom: 6px;"><i class="ri-error-warning-line" style="color: #e67e22; font-size: 14px; margin-right: 6px;"></i><div style="font-size: 13px; font-weight: 500;">å®¢æˆ·é›†ä¸­åº¦é£é™©</div></div><div style="font-size: 12px; color: #666; margin-bottom: 8px; padding-left: 20px;">åç§‘ç”µå­BGæ‰¿æ‹…äº†ä¸»è¦å¤§é¢å›æ¬¾ï¼Œéœ€å…³æ³¨å®¢æˆ·å¤šå…ƒåŒ–</div><div style="display: flex; align-items: center; margin-bottom: 6px;"><i class="ri-error-warning-line" style="color: #e67e22; font-size: 14px; margin-right: 6px;"></i><div style="font-size: 13px; font-weight: 500;">å€ºåŠ¡å¿è¿˜å‹åŠ›</div></div><div style="font-size: 12px; color: #666; padding-left: 20px;">æœ¬æœˆå¿è¿˜è´·æ¬¾100ä¸‡ï¼Œéœ€ç¡®ä¿åç»­æœˆä»½æœ‰è¶³å¤Ÿå¿å€ºèƒ½åŠ›</div></div></div><div><div style="font-weight: 500; color: #27ae60; margin-bottom: 8px;">ğŸ’¡ ç®¡ç†å»ºè®®</div><div style="background: #e8f5e9; border-radius: 8px; padding: 12px;"><div style="margin-bottom: 8px;"><div style="font-weight: 500; margin-bottom: 4px; color: #27ae60;">1. å®¢æˆ·ç®¡ç†ä¼˜åŒ–</div><div style="font-size: 12px; color: #666;">â€¢ åŠ å¼ºä¸å·¥å•†é“¶è¡Œç­‰å¤§å®¢æˆ·çš„é•¿æœŸåˆä½œå…³ç³»ç»´æŠ¤</div><div style="font-size: 12px; color: #666;">â€¢ å¼€å‘æ›´å¤šä¼˜è´¨å®¢æˆ·ï¼Œé™ä½å¯¹å•ä¸€å®¢æˆ·çš„ä¾èµ–åº¦</div></div><div style="margin-bottom: 8px;"><div style="font-weight: 500; margin-bottom: 4px; color: #27ae60;">2. èµ„é‡‘ç®¡æ§åŠ å¼º</div><div style="font-size: 12px; color: #666;">â€¢ å»ºç«‹å¤§é¢èµ„é‡‘å®¡æ‰¹äºŒçº§ç®¡æ§æœºåˆ¶</div><div style="font-size: 12px; color: #666;">â€¢ è®¾ç½®10ä¸‡ä»¥ä¸Šèµ„é‡‘æµåŠ¨å®æ—¶ç›‘æ§é¢„è­¦</div></div><div><div style="font-weight: 500; margin-bottom: 4px; color: #27ae60;">3. è´¢åŠ¡è®¡åˆ’ä¼˜åŒ–</div><div style="font-size: 12px; color: #666;">â€¢ æ ¹æ®è¿˜æ¬¾è®¡åˆ’åˆç†å®‰æ’èµ„é‡‘è°ƒé…</div><div style="font-size: 12px; color: #666;">â€¢ è€ƒè™‘é€šè¿‡åº”æ”¶è´¦æ¬¾ä¿ç†ç­‰æ–¹å¼ä¼˜åŒ–ç°é‡‘æµ</div></div></div></div></div></div><p style="margin-top: 12px;">å¤§é¢èµ„é‡‘åˆ†æå®Œæˆã€‚åŸºäºè¿™äº›æ•°æ®ï¼Œæ‚¨æ˜¯å¦éœ€è¦æˆ‘åˆ¶å®šå…·ä½“çš„èµ„é‡‘è°ƒé…æ–¹æ¡ˆï¼Ÿ</p></div>';
                    chatMessages.appendChild(systemMsg);
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }, 1500);
            }, 5000);
        }, 1000);
    }
        
        // ç»è¥å†³ç­–åˆ¶å®šåœºæ™¯æ¨¡æ‹Ÿ - ä¿®æ”¹è¿™ä¸ªå‡½æ•°
        function startDecisionScenario() {
            const chatMessages = document.querySelector('.chat-messages');
            
            addSystemMessage('æ‚¨å·²é€‰æ‹©ï¼š<strong>ç»è¥å†³ç­–åˆ¶å®š</strong>');
            addSystemMessage('ç»è¥å†³ç­–æ™ºèƒ½ä½“å·²å¯åŠ¨ï¼Œæ­£åœ¨èåˆèµ„é‡‘æ—¥æŠ¥ã€ç»è¥æœˆæŠ¥ã€å¹´åº¦é¢„ç®—æŠ¥å‘Šç­‰æ•°æ®æº...<br><small style="color: #666;">æ”¯æŒCEOä¸ªæ€§åŒ–è®¤çŸ¥ã€å†³ç­–ä¹ æƒ¯åˆ†æï¼Œæä¾›å†³ç­–å»ºè®®ã€é£é™©é¢„è­¦ã€ä»»åŠ¡æ´¾å‘</small>');
            
            document.querySelector('.input-area').focus();
            
            setTimeout(() => {
                addUserMessage('åç§‘ç”µå­BGè¿™ä¸ªæœˆåˆ©æ¶¦æƒ…å†µæ€ä¹ˆæ ·ï¼Ÿæœ‰ä»€ä¹ˆéœ€è¦æˆ‘å…³æ³¨çš„ï¼Ÿ');
                
                setTimeout(() => {
                    // æ˜¾ç¤ºæ¾„æ¸…è¡¨å•
                    const systemMsg = document.createElement('div');
                    systemMsg.className = 'message system';
                    systemMsg.innerHTML = '<div class="message-content"><p><strong>ä¸ºäº†æä¾›æ›´ç²¾å‡†çš„åˆ†æï¼Œè¯·è¡¥å……ä»¥ä¸‹ä¿¡æ¯ï¼š</strong></p><div style="margin-top: 12px; background: #f8f9fc; border-radius: 12px; padding: 16px;"><form id="clarificationForm" style="display: flex; flex-direction: column; gap: 12px;"><div style="background: #fff; border-radius: 8px; padding: 12px;"><div style="font-weight: 500; margin-bottom: 8px; color: #1a73e8;">ğŸ“‹ åˆ†æç»´åº¦é€‰æ‹©</div><div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;"><label style="display: flex; align-items: center; font-size: 13px;"><input type="checkbox" checked style="margin-right: 6px;"> åˆ©æ¶¦ç»“æ„åˆ†æ</label><label style="display: flex; align-items: center; font-size: 13px;"><input type="checkbox" checked style="margin-right: 6px;"> æˆæœ¬æ§åˆ¶æƒ…å†µ</label><label style="display: flex; align-items: center; font-size: 13px;"><input type="checkbox" checked style="margin-right: 6px;"> äººæ•ˆå¯¹æ¯”</label><label style="display: flex; align-items: center; font-size: 13px;"><input type="checkbox" style="margin-right: 6px;"> å®¢æˆ·ç»“æ„åˆ†æ</label><label style="display: flex; align-items: center; font-size: 13px;"><input type="checkbox" style="margin-right: 6px;"> å¸‚åœºç«äº‰æ€åŠ¿</label><label style="display: flex; align-items: center; font-size: 13px;"><input type="checkbox" style="margin-right: 6px;"> é£é™©é¢„è­¦</label></div></div><div style="background: #fff; border-radius: 8px; padding: 12px;"><div style="font-weight: 500; margin-bottom: 8px; color: #1a73e8;">â° å…³æ³¨æ—¶é—´èŒƒå›´</div><div style="display: flex; gap: 8px;"><label style="display: flex; align-items: center; font-size: 13px;"><input type="radio" name="timeRange" value="current" checked style="margin-right: 6px;"> å½“æœˆæƒ…å†µ</label><label style="display: flex; align-items: center; font-size: 13px;"><input type="radio" name="timeRange" value="quarter" style="margin-right: 6px;"> å­£åº¦å¯¹æ¯”</label><label style="display: flex; align-items: center; font-size: 13px;"><input type="radio" name="timeRange" value="year" style="margin-right: 6px;"> å¹´åº¦è¶‹åŠ¿</label></div></div><div style="background: #fff; border-radius: 8px; padding: 12px;"><div style="font-weight: 500; margin-bottom: 8px; color: #1a73e8;">ğŸ¯ å†³ç­–ç›®æ ‡</div><select style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 6px; font-size: 13px;"><option value="optimization">ä¼˜åŒ–ç°æœ‰ä¸šåŠ¡</option><option value="expansion">ä¸šåŠ¡æ‰©å¼ è®¡åˆ’</option><option value="cost_control">æˆæœ¬æ§åˆ¶é‡ç‚¹</option><option value="risk_management">é£é™©ç®¡ç†åŠ å¼º</option><option value="team_development">å›¢é˜Ÿå‘å±•</option></select></div><div style="background: #fff; border-radius: 8px; padding: 12px;"><div style="font-weight: 500; margin-bottom: 8px; color: #1a73e8;">ğŸ“Š å¯¹æ¯”åŸºå‡†</div><div style="display: flex; gap: 8px;"><label style="display: flex; align-items: center; font-size: 13px;"><input type="radio" name="benchmark" value="budget" checked style="margin-right: 6px;"> é¢„ç®—ç›®æ ‡</label><label style="display: flex; align-items: center; font-size: 13px;"><input type="radio" name="benchmark" value="history" style="margin-right: 6px;"> å†å²åŒæœŸ</label><label style="display: flex; align-items: center; font-size: 13px;"><input type="radio" name="benchmark" value="peer" style="margin-right: 6px;"> åŒä¸šå¯¹æ¯”</label></div></div><div style="background: #fff; border-radius: 8px; padding: 12px;"><div style="font-weight: 500; margin-bottom: 8px; color: #1a73e8;">ğŸ’¼ ç®¡ç†åå¥½</div><textarea placeholder="è¯·æè¿°æ‚¨å½“å‰æœ€å…³å¿ƒçš„å…·ä½“é—®é¢˜ï¼Œå¦‚ï¼šæ‹…å¿ƒæŸä¸ªæˆæœ¬é¡¹è¿‡é«˜ã€å…³æ³¨ç‰¹å®šå®¢æˆ·ç»­çº¦æƒ…å†µç­‰..." style="width: 100%; height: 60px; padding: 8px; border: 1px solid #ddd; border-radius: 6px; font-size: 13px; resize: vertical;"></textarea></div><div style="text-align: center; margin-top: 8px;"><button type="button" onclick="submitClarificationForm()" style="background: #1a73e8; color: white; border: none; padding: 10px 24px; border-radius: 6px; font-size: 14px; cursor: pointer;">ğŸ” å¼€å§‹æ·±åº¦åˆ†æ</button></div></form></div></div>';
                    chatMessages.appendChild(systemMsg);
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }, 800);
            }, 1000);
        }
        
        // å¤„ç†æ¾„æ¸…è¡¨å•æäº¤ - æ·»åŠ è¿›åº¦æ¡å’ŒçŸ¥è¯†åº“å­˜å‚¨
        function submitClarificationForm() {
            const chatMessages = document.querySelector('.chat-messages');
            
            // æ·»åŠ CEOå¡«å†™è¡¨å•çš„æ¶ˆæ¯
            addUserMessage('å·²å®Œæˆä¿¡æ¯è¡¥å……ï¼Œè¯·åŸºäºè¯¦ç»†éœ€æ±‚è¿›è¡Œåˆ†æ');
            
            // æ˜¾ç¤ºåˆ†æè¿›åº¦
            setTimeout(() => {
                const progressMsg = document.createElement('div');
                progressMsg.className = 'message system';
                progressMsg.innerHTML = '<div class="message-content"><div style="background: #f0f5ff; border-radius: 12px; padding: 16px;"><div style="font-weight: 500; color: #1a73e8; margin-bottom: 12px; display: flex; align-items: center;"><i class="ri-settings-3-line rotating" style="margin-right: 6px;"></i>æ­£åœ¨æ·±åº¦åˆ†æåç§‘ç”µå­BGæ•°æ®...</div><div style="background: #fff; border-radius: 8px; padding: 12px; margin-bottom: 12px;"><div id="analysisProgress" style="font-size: 13px; color: #666;"></div><div style="width: 100%; height: 8px; background: #f1f1f1; border-radius: 4px; margin-top: 8px; overflow: hidden;"><div id="progressBar" style="width: 0%; height: 100%; background: linear-gradient(90deg, #1a73e8, #4285f4); transition: width 0.3s ease;"></div></div></div><div style="font-size: 12px; color: #999; text-align: center;">â€¢ èåˆèµ„é‡‘æ—¥æŠ¥ã€ç»è¥æœˆæŠ¥æ•°æ®<br>â€¢ ç»“åˆæ‚¨çš„å†³ç­–åå¥½è¿›è¡Œä¸ªæ€§åŒ–åˆ†æ<br>â€¢ ç”Ÿæˆä¸“ä¸šå†³ç­–å»ºè®®å’Œé£é™©é¢„è­¦</div></div></div>';
                chatMessages.appendChild(progressMsg);
                chatMessages.scrollTop = chatMessages.scrollHeight;
                
                // æ¨¡æ‹Ÿåˆ†æè¿›åº¦
                const progressSteps = [
                    { text: 'æ­£åœ¨è·å–åç§‘ç”µå­BGå®æ—¶æ•°æ®...', progress: 20 },
                    { text: 'æ­£åœ¨åˆ†æåˆ©æ¶¦ç»“æ„å’Œæˆæœ¬æ§åˆ¶æƒ…å†µ...', progress: 40 },
                    { text: 'æ­£åœ¨è¿›è¡Œäººæ•ˆå¯¹æ¯”å’Œé¢„ç®—ç›®æ ‡åˆ†æ...', progress: 60 },
                    { text: 'æ­£åœ¨ç”Ÿæˆé£é™©é¢„è­¦å’Œå†³ç­–å»ºè®®...', progress: 80 },
                    { text: 'æ­£åœ¨æ•´åˆåˆ†æç»“æœ...', progress: 100 }
                ];
                
                let currentStep = 0;
                const progressInterval = setInterval(() => {
                    if (currentStep < progressSteps.length) {
                        document.getElementById('analysisProgress').textContent = progressSteps[currentStep].text;
                        document.getElementById('progressBar').style.width = progressSteps[currentStep].progress + '%';
                        currentStep++;
                    } else {
                        clearInterval(progressInterval);
                        
                        // ç§»é™¤è¿›åº¦æ¶ˆæ¯
                        setTimeout(() => {
                            chatMessages.removeChild(progressMsg);
                            
                            // æ˜¾ç¤ºåˆ†æç»“æœ
                            const systemMsg = document.createElement('div');
                            systemMsg.className = 'message system';
                            systemMsg.innerHTML = '<div class="message-content"><p><strong>åç§‘ç”µå­BG æ·±åº¦ç»è¥æ´å¯Ÿåˆ†æ</strong></p><div style="margin-top: 12px; background: #f8f9fc; border-radius: 12px; padding: 16px;"><div style="margin-bottom: 16px;"><div style="font-weight: 500; color: #1a73e8; margin-bottom: 8px; display: flex; align-items: center;"><i class="ri-pie-chart-line" style="margin-right: 6px;"></i>åŸºäºæ‚¨çš„éœ€æ±‚å®šåˆ¶åˆ†æ</div><div style="background: #fff; border-radius: 8px; padding: 12px; font-size: 12px;"><div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 8px;"><div><span style="color: #34C759;">âœ…</span> åˆ©æ¶¦ç»“æ„å·²åˆ†æ</div><div><span style="color: #34C759;">âœ…</span> æˆæœ¬æ§åˆ¶å·²æ ¸æŸ¥</div><div><span style="color: #34C759;">âœ…</span> äººæ•ˆå¯¹æ¯”å·²å®Œæˆ</div><div><span style="color: #34C759;">âœ…</span> é¢„ç®—ç›®æ ‡å·²å¯¹æ¯”</div></div><div style="font-size: 11px; color: #666; text-align: center; background: #f8f9fc; padding: 4px; border-radius: 4px;">å·²æŒ‰æ‚¨å…³æ³¨çš„"åˆ©æ¶¦ç‡>25%"å’Œ"äººæ•ˆæŒç»­æ”¹å–„"è¦æ±‚è¿›è¡Œé‡ç‚¹åˆ†æ</div></div></div><div style="margin-bottom: 16px;"><div style="font-weight: 500; color: #1a73e8; margin-bottom: 8px; display: flex; align-items: center;"><i class="ri-organization-chart" style="margin-right: 6px;"></i>é˜¿ç±³å·´å•å…ƒåˆ©æ¶¦ç©¿é€</div><div style="background: #fff; border-radius: 8px; padding: 12px;"><div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; margin-bottom: 12px;"><div style="background: #e8f5e9; border-radius: 8px; padding: 10px; text-align: center; border-left: 3px solid #34C759;"><div style="font-size: 16px; font-weight: 600; color: #34C759;">777ä¸‡</div><div style="font-size: 11px; color: #666; margin: 2px 0;">æœ¬æœˆè¥æ”¶</div><div style="font-size: 10px; color: #34C759;">â†— +15.2%</div></div><div style="background: #fff3e0; border-radius: 8px; padding: 10px; text-align: center; border-left: 3px solid #FF9800;"><div style="font-size: 16px; font-weight: 600; color: #FF9800;">568ä¸‡</div><div style="font-size: 11px; color: #666; margin: 2px 0;">è¿è¥æˆæœ¬</div><div style="font-size: 10px; color: #FF9800;">â†— +8.3%</div></div><div style="background: #e8f1ff; border-radius: 8px; padding: 10px; text-align: center; border-left: 3px solid #007AFF;"><div style="font-size: 16px; font-weight: 600; color: #007AFF;">209ä¸‡</div><div style="font-size: 11px; color: #666; margin: 2px 0;">å‡€åˆ©æ¶¦</div><div style="font-size: 10px; color: #007AFF;">â†— +28.7%</div></div></div><div style="background: #f8f9fc; border-radius: 6px; padding: 8px;"><div style="font-size: 12px; font-weight: 500; margin-bottom: 6px; color: #333;">è´£ä»»äººä¸šç»©ç©¿é€ï¼š</div><div style="font-size: 11px; color: #666; margin-bottom: 3px;"><span style="font-weight: 500;">äºå¿—å›½ï¼ˆæ€»è´Ÿè´£äººï¼‰</span>ï¼šå•å…ƒåˆ©æ¶¦ç‡26.9%ï¼Œè¶…é¢å®ŒæˆKPI</div><div style="font-size: 11px; color: #666; margin-bottom: 3px;"><span style="font-weight: 500;">å•å‰æ—ï¼ˆé”€å”®è´Ÿè´£ï¼‰</span>ï¼šæ–°ç­¾å®¢æˆ·3å®¶ï¼Œå›æ¬¾åŠæ—¶ç‡98%</div><div style="font-size: 11px; color: #666;"><span style="font-weight: 500;">æŠ€æœ¯å›¢é˜Ÿ</span>ï¼šäººæ•ˆåŒæ¯”æå‡12%ï¼Œæˆæœ¬æ§åˆ¶è‰¯å¥½</div></div></div></div><div style="margin-bottom: 16px;"><div style="font-weight: 500; color: #27ae60; margin-bottom: 8px; display: flex; align-items: center;"><i class="ri-lightbulb-line" style="margin-right: 6px;"></i>åŸºäºæ‚¨å†³ç­–åå¥½çš„å»ºè®®</div><div style="background: #e8f5e9; border-radius: 8px; padding: 12px;"><div style="margin-bottom: 10px;"><div style="font-weight: 500; margin-bottom: 4px; color: #27ae60; font-size: 14px;">ğŸ’¡ æ ¸å¿ƒå†³ç­–å»ºè®®</div><div style="font-size: 13px; color: #333; margin-bottom: 6px;"><strong>1. åˆ©æ¶¦åˆ†é…ä¼˜åŒ–</strong>ï¼šå»ºè®®å°†è¶…é¢åˆ©æ¶¦çš„30%ç”¨äºæŠ€æœ¯ç ”å‘æŠ•å…¥ï¼Œ70%ä½œä¸ºå›¢é˜Ÿæ¿€åŠ±</div><div style="font-size: 13px; color: #333; margin-bottom: 6px;"><strong>2. äººæ•ˆæå‡ç­–ç•¥</strong>ï¼šå½“å‰äººæ•ˆå·²è¾¾è¡Œä¸šä¼˜ç§€æ°´å¹³ï¼Œå»ºè®®å¤åˆ¶æˆåŠŸç»éªŒåˆ°å…¶ä»–BG</div><div style="font-size: 13px; color: #333;"><strong>3. æˆæœ¬æ§åˆ¶é‡ç‚¹</strong>ï¼šé‡ç‚¹å…³æ³¨æ‚¨æåˆ°çš„æŠ€æœ¯ç ”å‘æˆæœ¬ï¼Œå»ºè®®å»ºç«‹ç²¾ç»†åŒ–é¢„ç®—ç®¡ç†</div></div></div></div><div style="margin-bottom: 16px;"><div style="font-weight: 500; color: #e67e22; margin-bottom: 8px; display: flex; align-items: center;"><i class="ri-alarm-warning-line" style="margin-right: 6px;"></i>æ™ºèƒ½é£é™©é¢„è­¦</div><div style="background: #fff3e0; border-radius: 8px; padding: 12px;"><div style="margin-bottom: 8px;"><div style="display: flex; align-items: center; margin-bottom: 4px;"><div style="width: 16px; height: 16px; border-radius: 8px; background: #FF9800; margin-right: 6px;"></div><div style="font-weight: 500; font-size: 13px;">ä¸­åº¦é£é™©</div><div style="margin-left: auto; font-size: 11px; color: #666;">å½±å“è¯„çº§: B</div></div><div style="font-size: 12px; color: #666; margin-bottom: 6px;"><strong>å®¢æˆ·é›†ä¸­åº¦è¿‡é«˜</strong>ï¼šå‰3å¤§å®¢æˆ·å æ”¶å…¥72%ï¼Œå­˜åœ¨ä¾èµ–é£é™©</div><div style="font-size: 12px; color: #666;"><strong>å»ºè®®</strong>ï¼šQ4åˆ¶å®šå®¢æˆ·å¤šå…ƒåŒ–ç­–ç•¥ï¼Œç›®æ ‡é™è‡³60%ä»¥ä¸‹</div></div><div><div style="display: flex; align-items: center; margin-bottom: 4px;"><div style="width: 16px; height: 16px; border-radius: 8px; background: #34C759; margin-right: 6px;"></div><div style="font-weight: 500; font-size: 13px;">ä½åº¦é£é™©</div><div style="margin-left: auto; font-size: 11px; color: #666;">å½±å“è¯„çº§: A</div></div><div style="font-size: 12px; color: #666; margin-bottom: 6px;"><strong>æŠ€æœ¯äººå‘˜æµå¤±ç‡</strong>ï¼šç›®å‰3%ï¼Œä½äºè¡Œä¸šå¹³å‡æ°´å¹³</div><div style="font-size: 12px; color: #666;"><strong>ç»´æŒç­–ç•¥</strong>ï¼šç»§ç»­ä¿æŒç°æœ‰æ¿€åŠ±æœºåˆ¶</div></div></div></div></div></div><p style="margin-top: 12px;"><strong>åˆ†æå®Œæˆï¼</strong>ç³»ç»Ÿæ­£åœ¨å°†åˆ†ææŠ¥å‘Šå­˜å…¥çŸ¥è¯†åº“...</p></div>';
                    chatMessages.appendChild(systemMsg);
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                    
                    // æ˜¾ç¤ºæŠ¥å‘Šå­˜å‚¨è¿›åº¦
                    setTimeout(() => {
                        const saveMsg = document.createElement('div');
                        saveMsg.className = 'message system';
                        saveMsg.innerHTML = '<div class="message-content"><div style="background: #e8f5e9; border-radius: 12px; padding: 12px; border-left: 4px solid #34C759;"><div style="display: flex; align-items: center; margin-bottom: 8px;"><i class="ri-database-2-line" style="color: #34C759; margin-right: 6px;"></i><div style="font-weight: 500; color: #34C759;">æŠ¥å‘Šå·²æˆåŠŸå­˜å…¥çŸ¥è¯†åº“</div></div><div style="font-size: 12px; color: #666; margin-bottom: 8px;"><strong>å­˜å‚¨ä½ç½®ï¼š</strong>/çŸ¥è¯†åº“/ç»è¥åˆ†ææŠ¥å‘Š/åç§‘ç”µå­BG/2024å¹´9æœˆæ·±åº¦åˆ†æ.pdf</div><div style="font-size: 12px; color: #666; margin-bottom: 8px;"><strong>æŠ¥å‘Šç¼–å·ï¼š</strong>EA-HK-20240925-001</div><div style="font-size: 12px; color: #666;"><strong>å¯ç”¨äºï¼š</strong>æœªæ¥å†³ç­–å‚è€ƒã€å›¢é˜Ÿæ±‡æŠ¥ã€æŠ•èµ„æ–¹å±•ç¤º</div></div></div>';
                        chatMessages.appendChild(saveMsg);
                        chatMessages.scrollTop = chatMessages.scrollHeight;
                        
                        // æ˜¾ç¤ºä»»åŠ¡ç”Ÿæˆç¡®è®¤
                        setTimeout(() => {
                            const confirmMsg = document.createElement('div');
                            confirmMsg.className = 'message system';
                            confirmMsg.innerHTML = '<div class="message-content"><div style="background: #f0f5ff; border-radius: 12px; padding: 16px; border-left: 4px solid #1a73e8;"><div style="font-weight: 500; color: #1a73e8; margin-bottom: 8px; display: flex; align-items: center;"><i class="ri-question-line" style="margin-right: 6px;"></i>æ˜¯å¦ç”Ÿæˆæ‰§è¡Œä»»åŠ¡ï¼Ÿ</div><div style="font-size: 13px; color: #666; margin-bottom: 12px;">åŸºäºåˆ†æç»“æœï¼Œç³»ç»Ÿå»ºè®®ç”Ÿæˆä»¥ä¸‹æ‰§è¡Œä»»åŠ¡å¹¶åŒæ­¥åˆ°ä»»åŠ¡å†³ç­–æ™ºèƒ½ä½“ï¼š</div><div style="background: #fff; border-radius: 8px; padding: 12px; margin-bottom: 12px;"><div style="font-size: 13px; font-weight: 500; margin-bottom: 8px; color: #333;">æ‹Ÿç”Ÿæˆä»»åŠ¡æ¸…å•ï¼š</div><div style="font-size: 12px; color: #666; margin-bottom: 4px;">â€¢ åˆ¶å®šå®¢æˆ·å¤šå…ƒåŒ–æ‹“å±•è®¡åˆ’ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰</div><div style="font-size: 12px; color: #666; margin-bottom: 4px;">â€¢ å¤åˆ¶æˆåŠŸç®¡ç†ç»éªŒåˆ°å…¶ä»–BGï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰</div><div style="font-size: 12px; color: #666; margin-bottom: 4px;">â€¢ è®¾è®¡è¶…é¢åˆ©æ¶¦åˆ†é…æ–¹æ¡ˆï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰</div><div style="font-size: 12px; color: #666;">â€¢ å»ºç«‹ç²¾ç»†åŒ–é¢„ç®—ç®¡ç†åˆ¶åº¦ï¼ˆä½ä¼˜å…ˆçº§ï¼‰</div></div><div style="display: flex; gap: 12px; justify-content: center;"><button onclick="confirmTaskGeneration(true)" style="background: #1a73e8; color: white; border: none; padding: 10px 20px; border-radius: 6px; font-size: 13px; cursor: pointer; flex: 1;">âœ… ç¡®è®¤ç”Ÿæˆä»»åŠ¡</button><button onclick="confirmTaskGeneration(false)" style="background: #666; color: white; border: none; padding: 10px 20px; border-radius: 6px; font-size: 13px; cursor: pointer; flex: 1;">âŒ æš‚ä¸ç”Ÿæˆ</button></div></div></div>';
                            chatMessages.appendChild(confirmMsg);
                            chatMessages.scrollTop = chatMessages.scrollHeight;
                        }, 1500);
                    }, 2000);
                }, 500);
            }
        }, 1000); // æ¯ç§’æ›´æ–°ä¸€æ¬¡è¿›åº¦
    }, 500);
}

// æ–°å¢ï¼šä»»åŠ¡ç”Ÿæˆç¡®è®¤å‡½æ•°
function confirmTaskGeneration(confirmed) {
    const chatMessages = document.querySelector('.chat-messages');
    
    if (confirmed) {
        addUserMessage('ç¡®è®¤ç”Ÿæˆä»»åŠ¡ï¼Œè¯·åŒæ­¥åˆ°ä»»åŠ¡å†³ç­–æ™ºèƒ½ä½“');
        
        setTimeout(() => {
            const systemMsg = document.createElement('div');
            systemMsg.className = 'message system';
            systemMsg.innerHTML = '<div class="message-content"><div style="background: #f3e5f5; border-radius: 12px; padding: 16px;"><div style="font-weight: 500; color: #9C27B0; margin-bottom: 8px; display: flex; align-items: center;"><i class="ri-task-line" style="margin-right: 6px;"></i>ä»»åŠ¡å·²ç”Ÿæˆå¹¶åŒæ­¥</div><div style="font-size: 12px; color: #666; margin-bottom: 8px;">âœ… å·²æˆåŠŸåŒæ­¥è‡³ä»»åŠ¡å†³ç­–æ™ºèƒ½ä½“ï¼Œå…·ä½“ä»»åŠ¡å¦‚ä¸‹ï¼š</div><div style="margin-bottom: 8px;"><div style="background: #fff; border-radius: 6px; padding: 8px; margin-bottom: 6px; border-left: 3px solid #9C27B0;"><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;"><div style="font-weight: 500; font-size: 13px;">åˆ¶å®šå®¢æˆ·å¤šå…ƒåŒ–æ‹“å±•è®¡åˆ’</div><div style="background: #9C27B0; color: white; padding: 2px 6px; border-radius: 4px; font-size: 10px;">é«˜ä¼˜</div></div><div style="font-size: 11px; color: #666; margin-bottom: 4px;"><strong>è´Ÿè´£äººï¼š</strong> äºå¿—å›½ã€å•å‰æ—</div><div style="font-size: 11px; color: #666; margin-bottom: 4px;"><strong>æˆªæ­¢æ—¶é—´ï¼š</strong> 2024å¹´10æœˆ30æ—¥</div><div style="font-size: 11px; color: #666;"><strong>ç›®æ ‡ï¼š</strong> åˆ¶å®šæœªæ¥6ä¸ªæœˆå®¢æˆ·æ‹“å±•ç­–ç•¥ï¼Œé™ä½å‰3å¤§å®¢æˆ·å æ¯”è‡³60%</div></div><div style="background: #fff; border-radius: 6px; padding: 8px; margin-bottom: 6px; border-left: 3px solid #34C759;"><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;"><div style="font-weight: 500; font-size: 13px;">å¤åˆ¶æˆåŠŸç®¡ç†ç»éªŒåˆ°å…¶ä»–BG</div><div style="background: #34C759; color: white; padding: 2px 6px; border-radius: 4px; font-size: 10px;">ä¸­ä¼˜</div></div><div style="font-size: 11px; color: #666; margin-bottom: 4px;"><strong>è´Ÿè´£äººï¼š</strong> äºå¿—å›½ã€HRéƒ¨é—¨</div><div style="font-size: 11px; color: #666; margin-bottom: 4px;"><strong>æˆªæ­¢æ—¶é—´ï¼š</strong> 2024å¹´11æœˆ15æ—¥</div><div style="font-size: 11px; color: #666;"><strong>ç›®æ ‡ï¼š</strong> æ•´ç†åç§‘ç”µå­BGç®¡ç†ç»éªŒï¼Œåœ¨å…¨é›†å›¢æ¨å¹¿å®æ–½</div></div><div style="background: #fff; border-radius: 6px; padding: 8px; border-left: 3px solid #FF9800;"><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;"><div style="font-weight: 500; font-size: 13px;">è®¾è®¡è¶…é¢åˆ©æ¶¦åˆ†é…æ–¹æ¡ˆ</div><div style="background: #FF9800; color: white; padding: 2px 6px; border-radius: 4px; font-size: 10px;">ä¸­ä¼˜</div></div><div style="font-size: 11px; color: #666; margin-bottom: 4px;"><strong>è´Ÿè´£äººï¼š</strong> è´¢åŠ¡éƒ¨ã€äºå¿—å›½</div><div style="font-size: 11px; color: #666; margin-bottom: 4px;"><strong>æˆªæ­¢æ—¶é—´ï¼š</strong> 2024å¹´10æœˆ25æ—¥</div><div style="font-size: 11px; color: #666;"><strong>ç›®æ ‡ï¼š</strong> åˆ¶å®š59ä¸‡è¶…é¢åˆ©æ¶¦çš„åˆ†é…æ–¹æ¡ˆï¼ˆ30%ç ”å‘ï¼Œ70%æ¿€åŠ±ï¼‰</div></div></div><div style="text-align: center; margin-top: 8px;"><div style="display: inline-block; background: #9C27B0; color: white; padding: 6px 12px; border-radius: 6px; font-size: 11px; cursor: pointer;">ğŸ“‹ è·³è½¬åˆ°ä»»åŠ¡å†³ç­–æ™ºèƒ½ä½“</div></div></div><p style="margin-top: 12px;">ä»»åŠ¡å·²æˆåŠŸç”Ÿæˆï¼Œæ‚¨å¯ä»¥åœ¨ä»»åŠ¡å†³ç­–æ™ºèƒ½ä½“ä¸­æŸ¥çœ‹è¯¦ç»†è¿›åº¦å’Œç®¡ç†ä»»åŠ¡æ‰§è¡Œã€‚</p></div>';
            chatMessages.appendChild(systemMsg);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }, 800);
    } else {
        addUserMessage('æš‚ä¸ç”Ÿæˆä»»åŠ¡ï¼Œæˆ‘å†è€ƒè™‘ä¸€ä¸‹');
        
        setTimeout(() => {
            addSystemMessage('ç†è§£æ‚¨çš„è°¨æ…æ€åº¦ã€‚åˆ†ææŠ¥å‘Šå·²ä¿å­˜åœ¨çŸ¥è¯†åº“ä¸­ï¼Œæ‚¨éšæ—¶å¯ä»¥è¦æ±‚åŸºäºæ­¤æŠ¥å‘Šç”Ÿæˆä»»åŠ¡ã€‚ç°åœ¨ç»§ç»­ä¸ºæ‚¨åˆ†æå…¶ä»–ä¸šåŠ¡å•å…ƒã€‚');
        }, 800);
    }
}

// å¤„ç†ç¬¬äºŒä¸ªæ¾„æ¸…è¡¨å•æäº¤ - åŒæ ·æ·»åŠ è¿›åº¦æ¡
function submitClarificationForm2() {
    const chatMessages = document.querySelector('.chat-messages');
    
    addUserMessage('å·²å®Œæˆç´§æ€¥æƒ…å†µä¿¡æ¯è¡¥å……ï¼Œè¯·ç«‹å³åˆ†æ');
    
    // æ˜¾ç¤ºç´§æ€¥åˆ†æè¿›åº¦
    setTimeout(() => {
        const progressMsg = document.createElement('div');
        progressMsg.className = 'message system';
        progressMsg.innerHTML = '<div class="message-content"><div style="background: #ffebee; border-radius: 12px; padding: 16px; border-left: 4px solid #e74c3c;"><div style="font-weight: 500; color: #e74c3c; margin-bottom: 12px; display: flex; align-items: center;"><i class="ri-alarm-warning-line rotating" style="margin-right: 6px;"></i>ğŸš¨ ç´§æ€¥åˆ†æçŒè±¹äº¤é€šBGæ•°æ®...</div><div style="background: #fff; border-radius: 8px; padding: 12px; margin-bottom: 12px;"><div id="emergencyProgress" style="font-size: 13px; color: #666;"></div><div style="width: 100%; height: 8px; background: #f1f1f1; border-radius: 4px; margin-top: 8px; overflow: hidden;"><div id="emergencyProgressBar" style="width: 0%; height: 100%; background: linear-gradient(90deg, #e74c3c, #ff6b9d); transition: width 0.3s ease;"></div></div></div><div style="font-size: 12px; color: #999; text-align: center;">â€¢ å®æ—¶ç°é‡‘æµç›‘æ§åˆ†æ<br>â€¢ åº”æ”¶è´¦æ¬¾é£é™©è¯„ä¼°<br>â€¢ ç´§æ€¥æ•‘æ´æ–¹æ¡ˆåˆ¶å®š</div></div></div>';
        chatMessages.appendChild(progressMsg);
        chatMessages.scrollTop = chatMessages.scrollHeight;
        
        // ç´§æ€¥åˆ†æè¿›åº¦
        const emergencySteps = [
            { text: 'æ­£åœ¨è·å–çŒè±¹äº¤é€šBGå®æ—¶ç°é‡‘æµæ•°æ®...', progress: 25 },
            { text: 'æ­£åœ¨åˆ†æåº”æ”¶è´¦æ¬¾å’Œæˆæœ¬ç»“æ„...', progress: 50 },
            { text: 'æ­£åœ¨è¯„ä¼°å›¢é˜Ÿç¨³å®šæ€§å’Œå®¢æˆ·é£é™©...', progress: 75 },
            { text: 'æ­£åœ¨åˆ¶å®šç´§æ€¥æ•‘æ´æ–¹æ¡ˆ...', progress: 100 }
        ];
        
        let currentStep = 0;
        const emergencyInterval = setInterval(() => {
            if (currentStep < emergencySteps.length) {
                document.getElementById('emergencyProgress').textContent = emergencySteps[currentStep].text;
                document.getElementById('emergencyProgressBar').style.width = emergencySteps[currentStep].progress + '%';
                currentStep++;
            } else {
                clearInterval(emergencyInterval);
                
                // ç§»é™¤è¿›åº¦æ¶ˆæ¯å¹¶æ˜¾ç¤ºç»“æœ
                setTimeout(() => {
                    chatMessages.removeChild(progressMsg);
                    
                    const systemMsg = document.createElement('div');
                    systemMsg.className = 'message system';
                    systemMsg.innerHTML = '<div class="message-content"><p><strong>çŒè±¹äº¤é€šBG ç´§æ€¥ç°é‡‘æµåˆ†æ</strong></p><div style="margin-top: 12px; background: #f8f9fc; border-radius: 12px; padding: 16px;"><div style="margin-bottom: 16px;"><div style="font-weight: 500; color: #e74c3c; margin-bottom: 8px; display: flex; align-items: center;"><i class="ri-alarm-warning-line" style="margin-right: 6px;"></i>âš ï¸ ç°é‡‘æµé¢„è­¦çŠ¶æ€</div><div style="background: #ffebee; border-radius: 8px; padding: 12px; border-left: 4px solid #e74c3c;"><div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; margin-bottom: 12px;"><div style="background: #fff; border-radius: 8px; padding: 10px; text-align: center; border-left: 3px solid #e74c3c;"><div style="font-size: 16px; font-weight: 600; color: #e74c3c;">390ä¸‡</div><div style="font-size: 11px; color: #666; margin: 2px 0;">ç°é‡‘ä½™é¢</div><div style="font-size: 10px; color: #e74c3c;">âš ï¸ é¢„è­¦çº¿</div></div><div style="background: #fff; border-radius: 8px; padding: 10px; text-align: center; border-left: 3px solid #FF9800;"><div style="font-size: 16px; font-weight: 600; color: #FF9800;">0ä¸‡</div><div style="font-size: 11px; color: #666; margin: 2px 0;">å¯ç”¨èµ„é‡‘</div><div style="font-size: 10px; color: #e74c3c;">ğŸš¨ å±é™©</div></div><div style="background: #fff; border-radius: 8px; padding: 10px; text-align: center; border-left: 3px solid #34C759;"><div style="font-size: 16px; font-weight: 600; color: #34C759;">168ä¸‡</div><div style="font-size: 11px; color: #666; margin: 2px 0;">æœ¬æœˆå›æ¬¾</div><div style="font-size: 10px; color: #34C759;">â†— æ­£å¸¸</div></div></div></div></div><div style="margin-bottom: 16px;"><div style="font-weight: 500; color: #27ae60; margin-bottom: 8px; display: flex; align-items: center;"><i class="ri-lightbulb-line" style="margin-right: 6px;"></i>åŸºäºæ‚¨é£é™©åå¥½çš„æ•‘æ´æ–¹æ¡ˆ</div><div style="background: #fff3e0; border-radius: 8px; padding: 12px; border-left: 4px solid #FF9800;"><div style="margin-bottom: 10px;"><div style="font-weight: 500; margin-bottom: 4px; color: #e74c3c; font-size: 14px;">ğŸš¨ 7å¤©å†…ç´§æ€¥æ•‘æ´æªæ–½</div><div style="font-size: 13px; color: #333; margin-bottom: 6px;"><strong>1. ç«‹å³èµ„é‡‘æ³¨å…¥</strong>ï¼šä»åç§‘ç”µå­BGè°ƒé…300ä¸‡åº”æ€¥èµ„é‡‘</div><div style="font-size: 13px; color: #333; margin-bottom: 6px;"><strong>2. å›¢é˜Ÿé‡ç»„</strong>ï¼šæ›´æ¢è¿è¥å›¢é˜Ÿè´Ÿè´£äººï¼Œå€Ÿè°ƒç®¡ç†äººå‘˜</div><div style="font-size: 13px; color: #333;"><strong>3. åº”æ”¶è´¦æ¬¾å‚¬æ”¶</strong>ï¼šå¯åŠ¨ä¸“é¡¹å‚¬æ”¶ï¼Œç›®æ ‡å›æ”¶200ä¸‡</div></div><div style="font-size: 12px; color: #666; background: #f8f9fc; padding: 8px; border-radius: 6px;"><strong>é£é™©æ§åˆ¶</strong>ï¼šè€ƒè™‘åˆ°æ‚¨500ä¸‡æŸå¤±ä¸Šé™ï¼Œå»ºè®®åˆ†é˜¶æ®µæŠ•å…¥ï¼Œå…ˆæŠ•300ä¸‡è§‚å¯Ÿ1ä¸ªæœˆæ•ˆæœ</div></div></div></div></div><p style="margin-top: 12px;"><strong>ç´§æ€¥åˆ†æå®Œæˆï¼</strong>ç³»ç»Ÿæ­£åœ¨å°†ç´§æ€¥åˆ†ææŠ¥å‘Šå­˜å…¥çŸ¥è¯†åº“...</p></div>';
                    chatMessages.appendChild(systemMsg);
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                    
                    // æ˜¾ç¤ºæŠ¥å‘Šå­˜å‚¨å’Œä»»åŠ¡ç¡®è®¤
                    setTimeout(() => {
                        const saveMsg = document.createElement('div');
                        saveMsg.className = 'message system';
                        saveMsg.innerHTML = '<div class="message-content"><div style="background: #ffebee; border-radius: 12px; padding: 12px; border-left: 4px solid #e74c3c;"><div style="display: flex; align-items: center; margin-bottom: 8px;"><i class="ri-database-2-line" style="color: #e74c3c; margin-right: 6px;"></i><div style="font-weight: 500; color: #e74c3c;">ğŸš¨ ç´§æ€¥æŠ¥å‘Šå·²å­˜å…¥çŸ¥è¯†åº“</div></div><div style="font-size: 12px; color: #666; margin-bottom: 8px;"><strong>å­˜å‚¨ä½ç½®ï¼š</strong>/çŸ¥è¯†åº“/ç´§æ€¥åˆ†ææŠ¥å‘Š/çŒè±¹äº¤é€šBG/ç°é‡‘æµå±æœºåˆ†æ.pdf</div><div style="font-size: 12px; color: #666; margin-bottom: 8px;"><strong>æŠ¥å‘Šç¼–å·ï¼š</strong>EA-LB-EMERGENCY-20240925-001</div><div style="font-size: 12px; color: #666;"><strong>ç´§æ€¥çº§åˆ«ï¼š</strong>ç‰¹çº§é¢„è­¦</div></div><div style="background: #f0f5ff; border-radius: 8px; padding: 12px; margin-top: 12px; border-left: 4px solid #1a73e8;"><div style="font-weight: 500; color: #1a73e8; margin-bottom: 8px; display: flex; align-items: center;"><i class="ri-question-line" style="margin-right: 6px;"></i>æ˜¯å¦ç«‹å³ç”Ÿæˆç´§æ€¥æ•‘æ´ä»»åŠ¡ï¼Ÿ</div><div style="font-size: 13px; color: #666; margin-bottom: 12px;">åŸºäºç´§æ€¥åˆ†æï¼Œå¼ºçƒˆå»ºè®®ç«‹å³ç”Ÿæˆæ•‘æ´ä»»åŠ¡ï¼š</div><div style="background: #fff; border-radius: 6px; padding: 10px; margin-bottom: 8px;"><div style="font-size: 13px; font-weight: 500; margin-bottom: 4px;">ç´§æ€¥ä»»åŠ¡æ¸…å•ï¼š</div><div style="font-size: 12px; color: #666; margin-bottom: 3px;">â€¢ ç´§æ€¥èµ„é‡‘è°ƒé…ï¼ˆä»Šæ—¥å®Œæˆï¼‰</div><div style="font-size: 12px; color: #666; margin-bottom: 3px;">â€¢ ç®¡ç†å›¢é˜Ÿè°ƒæ•´ï¼ˆ3æ—¥å†…ï¼‰</div><div style="font-size: 12px; color: #666; margin-bottom: 3px;">â€¢ åº”æ”¶è´¦æ¬¾ä¸“é¡¹å‚¬æ”¶ï¼ˆ7æ—¥å†…ï¼‰</div><div style="font-size: 12px; color: #666;">â€¢ CEOå®¢æˆ·æŒ½å›è¡ŒåŠ¨ï¼ˆ10æ—¥å†…ï¼‰</div></div><div style="display: flex; gap: 8px; justify-content: center;"><button onclick="confirmEmergencyTasks(true)" style="background: #e74c3c; color: white; border: none; padding: 8px 16px; border-radius: 6px; font-size: 12px; cursor: pointer;">ğŸš¨ ç«‹å³ç”Ÿæˆç´§æ€¥ä»»åŠ¡</button><button onclick="confirmEmergencyTasks(false)" style="background: #666; color: white; border: none; padding: 8px 16px; border-radius: 6px; font-size: 12px; cursor: pointer;">âŒ æš‚ç¼“å¤„ç†</button></div></div></div>';
                        chatMessages.appendChild(saveMsg);
                        chatMessages.scrollTop = chatMessages.scrollHeight;
                    }, 2000);
                }, 500);
            }
        }, 1250); // ç¨å¿«ä¸€äº›çš„ç´§æ€¥åˆ†æè¿›åº¦
    }, 500);
}

// æ–°å¢ï¼šç´§æ€¥ä»»åŠ¡ç¡®è®¤å‡½æ•°
function confirmEmergencyTasks(confirmed) {
    const chatMessages = document.querySelector('.chat-messages');
    
    if (confirmed) {
        addUserMessage('ç«‹å³ç”Ÿæˆç´§æ€¥ä»»åŠ¡ï¼ŒåŒæ­¥åˆ°ä»»åŠ¡å†³ç­–æ™ºèƒ½ä½“');
        
        setTimeout(() => {
            const systemMsg = document.createElement('div');
            systemMsg.className = 'message system';
            systemMsg.innerHTML = '<div class="message-content"><div style="background: #ffebee; border-radius: 12px; padding: 16px; border-left: 4px solid #e74c3c;"><div style="font-weight: 500; color: #e74c3c; margin-bottom: 8px; display: flex; align-items: center;"><i class="ri-alarm-warning-line" style="margin-right: 6px;"></i>ğŸš¨ ç´§æ€¥ä»»åŠ¡å·²ç”Ÿæˆ</div><div style="font-size: 12px; color: #666; margin-bottom: 8px;">å·²ç´§æ€¥åŒæ­¥è‡³ä»»åŠ¡å†³ç­–æ™ºèƒ½ä½“ï¼Œæ‰€æœ‰ä»»åŠ¡å·²æ ‡è®°ä¸ºæœ€é«˜ä¼˜å…ˆçº§ï¼š</div><div style="margin-bottom: 8px;"><div style="background: #fff; border-radius: 6px; padding: 8px; margin-bottom: 6px; border-left: 3px solid #e74c3c; border: 2px solid #e74c3c;"><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;"><div style="font-weight: 500; font-size: 13px;">ç´§æ€¥èµ„é‡‘è°ƒé…</div><div style="background: #e74c3c; color: white; padding: 2px 6px; border-radius: 4px; font-size: 10px;">ğŸš¨ ç‰¹æ€¥</div></div><div style="font-size: 11px; color: #666; margin-bottom: 4px;"><strong>è´Ÿè´£äººï¼š</strong> CFOè´¢åŠ¡æ€»ç›‘</div><div style="font-size: 11px; color: #666; margin-bottom: 4px;"><strong>æˆªæ­¢æ—¶é—´ï¼š</strong> 2024å¹´9æœˆ25æ—¥ 18:00ï¼ˆä»Šæ—¥ï¼‰</div><div style="font-size: 11px; color: #666;"><strong>ç›®æ ‡ï¼š</strong> ä»é›†å›¢èµ„é‡‘æ± è°ƒé…300ä¸‡è‡³çŒè±¹äº¤é€šBG</div></div><div style="background: #fff; border-radius: 6px; padding: 8px; margin-bottom: 6px; border-left: 3px solid #e74c3c;"><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;"><div style="font-weight: 500; font-size: 13px;">ç®¡ç†å›¢é˜Ÿè°ƒæ•´</div><div style="background: #e74c3c; color: white; padding: 2px 6px; border-radius: 4px; font-size: 10px;">ç‰¹æ€¥</div></div><div style="font-size: 11px; color: #666; margin-bottom: 4px;"><strong>è´Ÿè´£äººï¼š</strong> HRæ€»ç›‘ã€äºå¿—å›½</div><div style="font-size: 11px; color: #666; margin-bottom: 4px;"><strong>æˆªæ­¢æ—¶é—´ï¼š</strong> 2024å¹´9æœˆ28æ—¥</div><div style="font-size: 11px; color: #666;"><strong>ç›®æ ‡ï¼š</strong> å§”æ´¾åç§‘ç”µå­ä¼˜ç§€ç®¡ç†äººå‘˜æ”¯æ´é‡ç»„</div></div><div style="background: #fff; border-radius: 6px; padding: 8px; margin-bottom: 6px; border-left: 3px solid #FF9800;"><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;"><div style="font-weight: 500; font-size: 13px;">åº”æ”¶è´¦æ¬¾ä¸“é¡¹å‚¬æ”¶</div><div style="background: #FF9800; color: white; padding: 2px 6px; border-radius: 4px; font-size: 10px;">ç´§æ€¥</div></div><div style="font-size: 11px; color: #666; margin-bottom: 4px;"><strong>è´Ÿè´£äººï¼š</strong> æå»ºå›½ã€æ³•åŠ¡éƒ¨</div><div style="font-size: 11px; color: #666; margin-bottom: 4px;"><strong>æˆªæ­¢æ—¶é—´ï¼š</strong> 2024å¹´10æœˆ2æ—¥</div><div style="font-size: 11px; color: #666;"><strong>ç›®æ ‡ï¼š</strong> å›æ”¶200ä¸‡åº”æ”¶è´¦æ¬¾ï¼Œæ”¹å–„ç°é‡‘æµ</div></div><div style="background: #fff; border-radius: 6px; padding: 8px; border-left: 3px solid #9C27B0;"><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;"><div style="font-weight: 500; font-size: 13px;">CEOå®¢æˆ·æŒ½å›è¡ŒåŠ¨</div><div style="background: #9C27B0; color: white; padding: 2px 6px; border-radius: 4px; font-size: 10px;">é«˜ä¼˜</div></div><div style="font-size: 11px; color: #666; margin-bottom: 4px;"><strong>è´Ÿè´£äººï¼š</strong> CEOäº²è‡ªã€æå»ºå›½ååŠ©</div><div style="font-size: 11px; color: #666; margin-bottom: 4px;"><strong>æˆªæ­¢æ—¶é—´ï¼š</strong> 2024å¹´10æœˆ5æ—¥</div><div style="font-size: 11px; color: #666;"><strong>ç›®æ ‡ï¼š</strong> æŒ½å›2å®¶æµå¤±å®¢æˆ·ï¼Œç­¾ç½²æ–°åˆä½œåè®®</div></div></div><div style="text-align: center; margin-top: 8px;"><div style="display: inline-block; background: #e74c3c; color: white; padding: 6px 12px; border-radius: 6px; font-size: 11px; cursor: pointer;">ğŸš¨ ç«‹å³æŸ¥çœ‹ç´§æ€¥ä»»åŠ¡</div></div></div><p style="margin-top: 12px;">ç´§æ€¥ä»»åŠ¡å·²åˆ›å»ºï¼Œä»»åŠ¡å†³ç­–æ™ºèƒ½ä½“å°†å®æ—¶ç›‘æ§æ‰§è¡Œè¿›åº¦ã€‚å»ºè®®æ‚¨ä¿æŒå¯†åˆ‡å…³æ³¨ï¼Œå¦‚æœ‰éœ€è¦å¯éšæ—¶è°ƒæ•´ç­–ç•¥ã€‚</p></div>';
            chatMessages.appendChild(systemMsg);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }, 800);
    } else {
        addUserMessage('æˆ‘å†è€ƒè™‘ä¸€ä¸‹ï¼Œæš‚ç¼“ç”Ÿæˆä»»åŠ¡');
        
        setTimeout(() => {
            addSystemMessage('ç†è§£æ‚¨çš„è°¨æ…æ€åº¦ã€‚ç´§æ€¥åˆ†ææŠ¥å‘Šå·²ä¿å­˜åœ¨çŸ¥è¯†åº“ä¸­ï¼Œæˆ‘ä¼šæŒç»­ç›‘æ§çŒè±¹äº¤é€šBGçš„ç°é‡‘æµçŠ¶å†µï¼Œå¦‚æƒ…å†µæ¶åŒ–ä¼šåŠæ—¶é¢„è­¦ã€‚æ‚¨éšæ—¶å¯ä»¥è¦æ±‚ç”Ÿæˆç´§æ€¥ä»»åŠ¡ã€‚');
        }, 800);
    }
}

// æ·»åŠ ç³»ç»Ÿæ¶ˆæ¯çš„è¾…åŠ©å‡½æ•°
function addSystemMessage(text) {
    const chatMessages = document.querySelector('.chat-messages');
    const systemMsg = document.createElement('div');
    systemMsg.className = 'message system';
    systemMsg.innerHTML = '<div class="message-content">' + text + '</div>';
    chatMessages.appendChild(systemMsg);
    chatMessages.scrollTop = chatMessages.scrollHeight;
    return systemMsg;
}

// æ·»åŠ ç”¨æˆ·æ¶ˆæ¯çš„è¾…åŠ©å‡½æ•°
function addUserMessage(text) {
    const chatMessages = document.querySelector('.chat-messages');
    const userMsg = document.createElement('div');
    userMsg.className = 'message user';
    userMsg.innerHTML = '<div class="message-content">' + text + '</div>';
    chatMessages.appendChild(userMsg);
    chatMessages.scrollTop = chatMessages.scrollHeight;
}

// Scene switcher functionality
const sceneSwitcher = document.querySelector('.scene-switcher');
let sceneDropdown;

sceneSwitcher.addEventListener('click', function(e) {
    e.stopPropagation();
    
    // Create dropdown if it doesn't exist
    if (!sceneDropdown) {
        sceneDropdown = document.createElement('div');
        sceneDropdown.className = 'scene-dropdown';
        sceneDropdown.innerHTML = `
            <div class="scene-option">é€šç”¨åœºæ™¯</div>
            <div class="scene-option">ä»»åŠ¡å†³ç­–</div>
            <div class="scene-option active">ç»è¥å†³ç­–</div>
            <div class="scene-option">æˆ˜ç•¥å†³ç­–</div>
        `;
        document.querySelector('.chat-input-container').appendChild(sceneDropdown);
        
        // Position the dropdown properly
        const rect = sceneSwitcher.getBoundingClientRect();
        sceneDropdown.style.position = 'absolute';
        sceneDropdown.style.bottom = '65px';
        sceneDropdown.style.left = '10px';
        
        // Add click events to options
        const sceneOptions = sceneDropdown.querySelectorAll('.scene-option');
        sceneOptions.forEach(option => {
            option.addEventListener('click', function(e) {
                e.stopPropagation();
                
                // Check which scene is clicked and redirect accordingly
                if (this.textContent === 'é€šç”¨åœºæ™¯') {
                    window.location.href = 'chat.html';
                    return;
                } else if (this.textContent === 'ä»»åŠ¡å†³ç­–') {
                    window.location.href = 'task_agent.html';
                    return;
                } else if (this.textContent === 'æˆ˜ç•¥å†³ç­–') {
                    window.location.href = 'strategy_agent.html';
                    return;
                }
                
                // Update active state for ç»è¥å†³ç­– (stay on current page)
                sceneOptions.forEach(opt => opt.classList.remove('active'));
                this.classList.add('active');
                
                // Update scene switcher text
                sceneSwitcher.querySelector('span').textContent = this.textContent;
                
                // Hide dropdown
                sceneDropdown.style.display = 'none';
            });
        });
    }
    
    // Toggle dropdown visibility
    if (getComputedStyle(sceneDropdown).display !== 'none') {
        sceneDropdown.style.display = 'none';
    } else {
        sceneDropdown.style.display = 'block';
    }
});

// Network toggle functionality
const networkToggle = document.querySelector('.network-toggle');
networkToggle.addEventListener('click', function() {
    this.classList.toggle('active');
    if (this.classList.contains('active')) {
        this.querySelector('span').textContent = 'è”ç½‘';
    } else {
        this.querySelector('span').textContent = 'ä¸è”ç½‘';
    }
});

// Hide scene dropdown when clicking elsewhere
document.addEventListener('click', function(e) {
    if (sceneDropdown && sceneDropdown.style.display === 'block' && !sceneSwitcher.contains(e.target) && !sceneDropdown.contains(e.target)) {
        sceneDropdown.style.display = 'none';
    }
});
    </script>
</body>
</html> 